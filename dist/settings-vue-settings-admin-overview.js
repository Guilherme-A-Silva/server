(()=>{"use strict";var t,e={7696:(t,e,n)=>{var s=n(85471),r=n(19051),i=n(81222),o=n(53334),a=n(63814),c=n(21376),l=n(32190),u=n(6695),p=n(2645),d=n(88837),g=n(70580),h=n.n(g);const m=(0,s.pM)({__name:"SettingsSetupChecksListItem",props:{setupCheck:null},setup(t){const e=t,n=(0,s.EW)(()=>"error"===e.setupCheck.severity?"M19,6.41L17.59,5L12,10.59L6.41,5L5,6.41L10.59,12L5,17.59L6.41,19L12,13.41L17.59,19L19,17.59L13.41,12L19,6.41Z":"warning"===e.setupCheck.severity?"M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z":"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"),r=(0,s.EW)(()=>i(e.setupCheck.description,e.setupCheck.descriptionParameters));function i(t,e){if(!e)return t;for(const[n,s]of Object.entries(e)){let e;e="user"===s.type?"@".concat(h()(s.name)):"file"===s.type?h()(s.path||s.name):"highlight"===s.type?s.link?'<a href="'+encodeURI(s.link)+'">'+h()(s.name)+"</a>":"<em>"+h()(s.name)+"</em>":h()(s.name),t=t.replaceAll("{"+n+"}",e)}return t}return{__sfc:!0,props:e,leadingIcon:n,descriptionHtml:r,parseRichObject:i,NcIconSvgWrapper:u.A}}});var C=n(85072),A=n.n(C),k=n(97825),f=n.n(k),v=n(77659),_=n.n(v),y=n(55056),S=n.n(y),b=n(10540),L=n.n(b),w=n(41113),x=n.n(w),E=n(62585),I={};I.styleTagTransform=x(),I.setAttributes=S(),I.insert=_().bind(null,"head"),I.domAPI=f(),I.insertStyleElement=L(),A()(E.A,I),E.A&&E.A.locals&&E.A.locals;var O=n(14486);const H=(0,O.A)(m,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("li",{staticClass:"settings-setup-checks-item",class:{["settings-setup-checks-item--".concat(t.setupCheck.severity)]:!0}},[e(n.NcIconSvgWrapper,{staticClass:"settings-setup-checks-item__icon",attrs:{path:n.leadingIcon}}),t._v(" "),e("div",{staticClass:"settings-setup-checks-item__wrapper"},[e("div",{staticClass:"settings-setup-checks-item__name"},[t._v("\n\t\t\t"+t._s(t.setupCheck.name)+"\n\t\t")]),t._v(" "),e("div",{staticClass:"settings-setup-checks-item__description",domProps:{innerHTML:t._s(n.descriptionHtml)}})])],1)},[],!1,null,null,null).exports,M=(0,s.pM)({__name:"SettingsSetupChecksList",props:{severity:null,setupChecks:null},setup(t){const e=t,n=(0,s.EW)(()=>"error"===e.severity?(0,o.t)("settings","Setup errors"):"warning"===e.severity?(0,o.t)("settings","Setup warnings"):(0,o.t)("settings","Setup recommendations")),r=(0,s.EW)(()=>e.setupChecks.filter(t=>{let{severity:n}=t;return n===e.severity}));return{__sfc:!0,props:e,ariaLabel:n,shownChecks:r,SettingsSetupChecksListItem:H}}});var D=n(99109),N={};N.styleTagTransform=x(),N.setAttributes=S(),N.insert=_().bind(null,"head"),N.domAPI=f(),N.insertStyleElement=L(),A()(D.A,N),D.A&&D.A.locals&&D.A.locals;const T=(0,O.A)(M,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("ul",{staticClass:"settings-setup-checks-list",attrs:{"aria-label":n.ariaLabel}},t._l(n.shownChecks,function(t,s){return e(n.SettingsSetupChecksListItem,{key:s,staticClass:"settings-setup-checks-list__item",attrs:{"setup-check":t}})}),1)},[],!1,null,null,null).exports,P=(0,n(35947).YK)().setApp("settings").detectUser().build(),W=(0,s.pM)({__name:"AdminSettingsSetupChecks",setup(t){const{sectionDocsUrl:e,installationGuidesDocsUrl:n,loggingSectionUrl:g}=(0,i.C)("settings","setup-checks-section"),h=(0,o.t)("settings","Please double check the {linkStartInstallationGuides}installation guides{linkEnd}, and check for any errors or warnings in the {linkStartLog}log{linkEnd}.",{linkEnd:" ↗</a>",linkStartInstallationGuides:'<a target="_blank" rel="noreferrer noopener" href="'.concat(n,'">'),linkStartLog:'<a target="_blank" rel="noreferrer noopener" href="'.concat(g,'">')},{escape:!1}),m=(0,o.t)("settings","Check the security of your {productName} over {linkStart}our security scan{linkEnd}.",{linkStart:'<a target="_blank" rel="noreferrer noopener" href="https://scan.nextcloud.com">',linkEnd:" ↗</a>",productName:window.OC.theme.productName},{escape:!1}),C=(0,s.KR)(!0),A=(0,s.KR)(!1),k=(0,s.KR)([]),f=(0,s.EW)(()=>0===k.value.length),v=(0,s.EW)(()=>k.value.some(t=>{let{severity:e}=t;return"error"===e})),_=(0,s.EW)(()=>k.value.some(t=>{let{severity:e}=t;return"warning"===e}));async function y(){try{C.value=!0,A.value=!1;const{data:t}=await r.Ay.get((0,a.Jv)("settings/ajax/checksetup"));k.value=Object.values(t).map(t=>Object.values(t)).flat().filter(t=>{let{severity:e}=t;return"success"!==e})}catch(t){A.value=!0,P.error("Failed to load setup checks",{error:t})}finally{C.value=!1}}return(0,s.sV)(y),{__sfc:!0,sectionDocsUrl:e,installationGuidesDocsUrl:n,loggingSectionUrl:g,adminDocsHtml:h,footerHtml:m,loading:C,loadingFailed:A,setupChecks:k,allTestsOk:f,hasErrors:v,hasWarnings:_,loadSetupChecks:y,mdiCheck:"M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z",mdiCloseCircleOutline:"M12,20C7.59,20 4,16.41 4,12C4,7.59 7.59,4 12,4C16.41,4 20,7.59 20,12C20,16.41 16.41,20 12,20M12,2C6.47,2 2,6.47 2,12C2,17.53 6.47,22 12,22C17.53,22 22,17.53 22,12C22,6.47 17.53,2 12,2M14.59,8L12,10.59L9.41,8L8,9.41L10.59,12L8,14.59L9.41,16L12,13.41L14.59,16L16,14.59L13.41,12L16,9.41L14.59,8Z",mdiReload:"M2 12C2 16.97 6.03 21 11 21C13.39 21 15.68 20.06 17.4 18.4L15.9 16.9C14.63 18.25 12.86 19 11 19C4.76 19 1.64 11.46 6.05 7.05C10.46 2.64 18 5.77 18 12H15L19 16H19.1L23 12H20C20 7.03 15.97 3 11 3C6.03 3 2 7.03 2 12Z",t:o.t,NcButton:c.A,NcEmptyContent:l.A,NcIconSvgWrapper:u.A,NcLoadingIcon:p.A,NcSettingsSection:d.A,SettingsSetupChecksList:T}}});var j=n(76745),R={};R.styleTagTransform=x(),R.setAttributes=S(),R.insert=_().bind(null,"head"),R.domAPI=f(),R.insertStyleElement=L(),A()(j.A,R),j.A&&j.A.locals&&j.A.locals;const G=(0,O.A)(W,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcSettingsSection,{attrs:{id:"security-warning",name:n.t("settings","Security & setup warnings"),description:n.t("settings","It is important for the security and performance of your instance that everything is configured correctly. To help you with that we are doing some automatic checks. Please see the linked documentation for more information."),"doc-url":n.sectionDocsUrl}},[n.loading?e(n.NcEmptyContent,{attrs:{name:n.t("settings","Checking your server …")},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcLoadingIcon)]},proxy:!0}],null,!1,1675040227)}):n.loadingFailed?e(n.NcEmptyContent,{attrs:{name:n.t("settings","Failed to run setup checks")},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:n.mdiCloseCircleOutline}})]},proxy:!0},{key:"action",fn:function(){return[e(n.NcButton,{attrs:{variant:"primary"},on:{click:n.loadSetupChecks},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:n.mdiReload}})]},proxy:!0}])},[t._v("\n\t\t\t\t"+t._s(n.t("settings","Try again"))+"\n\t\t\t")])]},proxy:!0}])}):n.allTestsOk?e(n.NcEmptyContent,{attrs:{name:n.t("settings","All checks passed.")},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:n.mdiCheck}})]},proxy:!0}])}):[n.hasErrors||n.hasWarnings?e("p",{staticClass:"settings-security-warnings__result-hint"},[t._v("\n\t\t\t"+t._s(n.hasErrors?n.t("settings","There are some errors regarding your setup."):n.t("settings","There are some warnings regarding your setup."))+"\n\t\t")]):t._e(),t._v(" "),e(n.SettingsSetupChecksList,{attrs:{"setup-checks":n.setupChecks,severity:"error"}}),t._v(" "),e(n.SettingsSetupChecksList,{attrs:{"setup-checks":n.setupChecks,severity:"warning"}}),t._v(" "),e(n.SettingsSetupChecksList,{attrs:{"setup-checks":n.setupChecks,severity:"info"}}),t._v(" "),e("p",{staticClass:"settings-security-warnings__hint",domProps:{innerHTML:t._s(n.adminDocsHtml)}})],t._v(" "),e("p",{staticClass:"settings-security-warnings__footer",domProps:{innerHTML:t._s(n.footerHtml)}})],2)},[],!1,null,null,null).exports;new s.Ay({name:"AdminSettingsSetupChecks",el:"#vue-admin-settings-setup-checks",render:t=>t(G)})},62585:(t,e,n)=>{n.d(e,{A:()=>a});var s=n(71354),r=n.n(s),i=n(76314),o=n.n(i)()(r());o.push([t.id,".settings-setup-checks-item{border-radius:var(--border-radius-element);display:flex;align-items:start;flex-direction:row}.settings-setup-checks-item:hover{background-color:var(--color-background-hover)}.settings-setup-checks-item__wrapper{display:flex;flex-direction:column;padding-top:calc((var(--default-clickable-area) - 1lh)/2)}.settings-setup-checks-item__description{color:var(--color-text-maxcontrast)}.settings-setup-checks-item__icon{border-radius:calc(var(--default-clickable-area)/2)}.settings-setup-checks-item--error .settings-setup-checks-item__icon{color:var(--color-element-error)}.settings-setup-checks-item--warning .settings-setup-checks-item__icon{color:var(--color-element-warning)}.settings-setup-checks-item--info .settings-setup-checks-item__icon{color:var(--color-element-info)}","",{version:3,sources:["webpack://./apps/settings/src/components/SettingsSetupChecks/SettingsSetupChecksListItem.vue"],names:[],mappings:"AACA,4BACC,0CAAA,CACA,YAAA,CACA,iBAAA,CACA,kBAAA,CAEA,kCACC,8CAAA,CAGD,qCACC,YAAA,CACA,qBAAA,CAEA,yDAAA,CAGD,yCACC,mCAAA,CAGD,kCACC,mDAAA,CAGD,qEACC,gCAAA,CAED,uEACC,kCAAA,CAED,oEACC,+BAAA",sourcesContent:["\n.settings-setup-checks-item {\n\tborder-radius: var(--border-radius-element);\n\tdisplay: flex;\n\talign-items: start;\n\tflex-direction: row;\n\n\t&:hover {\n\t\tbackground-color: var(--color-background-hover);\n\t}\n\n\t&__wrapper {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\t// align with icon\n\t\tpadding-top: calc((var(--default-clickable-area) - 1lh) / 2);\n\t}\n\n\t&__description {\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n\t&__icon {\n\t\tborder-radius: calc(var(--default-clickable-area) / 2);\n\t}\n\n\t&--error &__icon {\n\t\tcolor: var(--color-element-error);\n\t}\n\t&--warning &__icon {\n\t\tcolor: var(--color-element-warning);\n\t}\n\t&--info &__icon {\n\t\tcolor: var(--color-element-info);\n\t}\n}\n"],sourceRoot:""}]);const a=o},76745:(t,e,n)=>{n.d(e,{A:()=>a});var s=n(71354),r=n.n(s),i=n(76314),o=n.n(i)()(r());o.push([t.id,".settings-security-warnings__hint{margin-top:calc(2*var(--default-grid-baseline))}.settings-security-warnings__footer{margin-top:calc(3*var(--default-grid-baseline))}","",{version:3,sources:["webpack://./apps/settings/src/views/AdminSettingsSetupChecks.vue"],names:[],mappings:"AAEC,kCACC,+CAAA,CAGD,oCACC,+CAAA",sourcesContent:["\n.settings-security-warnings {\n\t&__hint {\n\t\tmargin-top: calc(2 * var(--default-grid-baseline));\n\t}\n\n\t&__footer {\n\t\tmargin-top: calc(3 * var(--default-grid-baseline));\n\t}\n}\n"],sourceRoot:""}]);const a=o},99109:(t,e,n)=>{n.d(e,{A:()=>a});var s=n(71354),r=n.n(s),i=n(76314),o=n.n(i)()(r());o.push([t.id,".settings-setup-checks-list:not(:first-of-type){margin-top:calc(2*var(--default-grid-baseline))}.settings-setup-checks-list__item:not(:last-of-type){margin-bottom:var(--default-grid-baseline)}","",{version:3,sources:["webpack://./apps/settings/src/components/SettingsSetupChecks/SettingsSetupChecksList.vue"],names:[],mappings:"AAEC,gDACC,+CAAA,CAGD,qDACC,0CAAA",sourcesContent:["\n.settings-setup-checks-list {\n\t&:not(:first-of-type) {\n\t\tmargin-top: calc(2 * var(--default-grid-baseline));\n\t}\n\n\t&__item:not(:last-of-type) {\n\t\tmargin-bottom: var(--default-grid-baseline);\n\t}\n}\n"],sourceRoot:""}]);const a=o}},n={};function s(t){var r=n[t];if(void 0!==r)return r.exports;var i=n[t]={id:t,loaded:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.loaded=!0,i.exports}s.m=e,t=[],s.O=(e,n,r,i)=>{if(!n){var o=1/0;for(u=0;u<t.length;u++){for(var[n,r,i]=t[u],a=!0,c=0;c<n.length;c++)(!1&i||o>=i)&&Object.keys(s.O).every(t=>s.O[t](n[c]))?n.splice(c--,1):(a=!1,i<o&&(o=i));if(a){t.splice(u--,1);var l=r();void 0!==l&&(e=l)}}return e}i=i||0;for(var u=t.length;u>0&&t[u-1][2]>i;u--)t[u]=t[u-1];t[u]=[n,r,i]},s.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return s.d(e,{a:e}),e},s.d=(t,e)=>{for(var n in e)s.o(e,n)&&!s.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},s.e=()=>Promise.resolve(),s.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),s.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),s.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),s.j=7015,(()=>{s.b="undefined"!=typeof document&&document.baseURI||self.location.href;var t={7015:0};s.O.j=e=>0===t[e];var e=(e,n)=>{var r,i,[o,a,c]=n,l=0;if(o.some(e=>0!==t[e])){for(r in a)s.o(a,r)&&(s.m[r]=a[r]);if(c)var u=c(s)}for(e&&e(n);l<o.length;l++)i=o[l],s.o(t,i)&&t[i]&&t[i][0](),t[i]=0;return s.O(u)},n=self.webpackChunknextcloud=self.webpackChunknextcloud||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))})(),s.nc=void 0;var r=s.O(void 0,[4208],()=>s(7696));r=s.O(r)})();
//# sourceMappingURL=settings-vue-settings-admin-overview.js.map?v=a1a856419bd1370123a8