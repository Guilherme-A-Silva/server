"use strict";(self.webpackChunknextcloud=self.webpackChunknextcloud||[]).push([[4529],{846:(t,e,n)=>{n.d(e,{T:()=>u});var a=n(85168),i=n(81222),o=n(53334),s=n(63814),p=n(65899),r=n(19051),l=n(36620),d=n(86438);const c=()=>(0,a.Qg)((0,o.Tl)("settings","An error occurred during the request. Unable to proceed.")),u=(0,p.nY)("settings-apps",{state:()=>({apps:[],categories:[],updateCount:(0,i.C)("settings","appstoreUpdateCount",0),loading:{apps:!1,categories:!1},loadingList:!1,gettingCategoriesPromise:null}),actions:{async loadCategories(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(this.categories.length>0)||t)try{this.loading.categories=!0;const{data:t}=await r.Ay.get((0,s.Jv)("settings/apps/categories"));for(const n of t){var e;n.icon=null!==(e=d.A[n.id])&&void 0!==e?e:""}this.$patch({categories:t})}catch(t){l.A.error(t),c()}finally{this.loading.categories=!1}},async loadApps(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!(this.apps.length>0)||t)try{this.loading.apps=!0;const{data:t}=await r.Ay.get((0,s.Jv)("settings/apps/list"));this.$patch({apps:t.apps})}catch(t){l.A.error(t),c()}finally{this.loading.apps=!1}},getCategoryById(t){var e;return null!==(e=this.categories.find(e=>{let{id:n}=e;return n===t}))&&void 0!==e?e:null},getAppById(t){var e;return null!==(e=this.apps.find(e=>{let{id:n}=e;return n===t}))&&void 0!==e?e:null}}})},5472:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,".app-discover[data-v-114ea95a]{max-width:1008px;margin-inline:auto;padding-inline:54px;padding-block-end:var(--default-clickable-area, 44px);display:flex;flex-direction:column;gap:var(--default-clickable-area, 44px)}","",{version:3,sources:["webpack://./apps/settings/src/components/AppStoreDiscover/AppStoreDiscoverSection.vue"],names:[],mappings:"AACA,+BACC,gBAAA,CACA,kBAAA,CACA,mBAAA,CAEA,qDAAA,CAEA,YAAA,CACA,qBAAA,CACA,uCAAA",sourcesContent:["\n.app-discover {\n\tmax-width: 1008px; /* 900px + 2x 54px padding for the carousel controls */\n\tmargin-inline: auto;\n\tpadding-inline: 54px;\n\t/* Padding required to make last element not bound to the bottom */\n\tpadding-block-end: var(--default-clickable-area, 44px);\n\n\tdisplay: flex;\n\tflex-direction: column;\n\tgap: var(--default-clickable-area, 44px);\n}\n"],sourceRoot:""}]);const p=s},18460:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,"\n/* The categories-loading indicator */\n.categories--loading[data-v-419cd0cf] {\n\tflex: 1;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n","",{version:3,sources:["webpack://./apps/settings/src/views/AppStoreNavigation.vue"],names:[],mappings:";AA0IA,qCAAA;AACA;CACA,OAAA;CACA,aAAA;CACA,mBAAA;CACA,uBAAA;AACA",sourcesContent:['\x3c!--\n  - SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n<template>\n\t\x3c!-- Categories & filters --\x3e\n\t<NcAppNavigation :aria-label="t(\'settings\', \'Apps\')">\n\t\t<template #list>\n\t\t\t<NcAppNavigationItem v-if="appstoreEnabled"\n\t\t\t\tid="app-category-discover"\n\t\t\t\t:to="{ name: \'apps-category\', params: { category: \'discover\'} }"\n\t\t\t\t:name="APPS_SECTION_ENUM.discover">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<NcIconSvgWrapper :path="APPSTORE_CATEGORY_ICONS.discover" />\n\t\t\t\t</template>\n\t\t\t</NcAppNavigationItem>\n\t\t\t<NcAppNavigationItem id="app-category-installed"\n\t\t\t\t:to="{ name: \'apps-category\', params: { category: \'installed\'} }"\n\t\t\t\t:name="APPS_SECTION_ENUM.installed">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<NcIconSvgWrapper :path="APPSTORE_CATEGORY_ICONS.installed" />\n\t\t\t\t</template>\n\t\t\t</NcAppNavigationItem>\n\t\t\t<NcAppNavigationItem id="app-category-enabled"\n\t\t\t\t:to="{ name: \'apps-category\', params: { category: \'enabled\' } }"\n\t\t\t\t:name="APPS_SECTION_ENUM.enabled">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<NcIconSvgWrapper :path="APPSTORE_CATEGORY_ICONS.enabled" />\n\t\t\t\t</template>\n\t\t\t</NcAppNavigationItem>\n\t\t\t<NcAppNavigationItem id="app-category-disabled"\n\t\t\t\t:to="{ name: \'apps-category\', params: { category: \'disabled\' } }"\n\t\t\t\t:name="APPS_SECTION_ENUM.disabled">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<NcIconSvgWrapper :path="APPSTORE_CATEGORY_ICONS.disabled" />\n\t\t\t\t</template>\n\t\t\t</NcAppNavigationItem>\n\t\t\t<NcAppNavigationItem v-if="store.updateCount > 0"\n\t\t\t\tid="app-category-updates"\n\t\t\t\t:to="{ name: \'apps-category\', params: { category: \'updates\' } }"\n\t\t\t\t:name="APPS_SECTION_ENUM.updates">\n\t\t\t\t<template #counter>\n\t\t\t\t\t<NcCounterBubble>{{ store.updateCount }}</NcCounterBubble>\n\t\t\t\t</template>\n\t\t\t\t<template #icon>\n\t\t\t\t\t<NcIconSvgWrapper :path="APPSTORE_CATEGORY_ICONS.updates" />\n\t\t\t\t</template>\n\t\t\t</NcAppNavigationItem>\n\t\t\t<NcAppNavigationItem id="app-category-your-bundles"\n\t\t\t\t:to="{ name: \'apps-category\', params: { category: \'app-bundles\' } }"\n\t\t\t\t:name="APPS_SECTION_ENUM[\'app-bundles\']">\n\t\t\t\t<template #icon>\n\t\t\t\t\t<NcIconSvgWrapper :path="APPSTORE_CATEGORY_ICONS.bundles" />\n\t\t\t\t</template>\n\t\t\t</NcAppNavigationItem>\n\n\t\t\t<NcAppNavigationSpacer />\n\n\t\t\t\x3c!-- App store categories --\x3e\n\t\t\t<li v-if="appstoreEnabled && categoriesLoading" class="categories--loading">\n\t\t\t\t<NcLoadingIcon :size="20" :aria-label="t(\'settings\', \'Loading categories\')" />\n\t\t\t</li>\n\t\t\t<template v-else-if="appstoreEnabled && !categoriesLoading">\n\t\t\t\t<NcAppNavigationItem v-if="isSubscribed"\n\t\t\t\t\tid="app-category-supported"\n\t\t\t\t\t:to="{ name: \'apps-category\', params: { category: \'supported\' } }"\n\t\t\t\t\t:name="APPS_SECTION_ENUM.supported">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<NcIconSvgWrapper :path="APPSTORE_CATEGORY_ICONS.supported" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcAppNavigationItem>\n\t\t\t\t<NcAppNavigationItem id="app-category-featured"\n\t\t\t\t\t:to="{ name: \'apps-category\', params: { category: \'featured\' } }"\n\t\t\t\t\t:name="APPS_SECTION_ENUM.featured">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<NcIconSvgWrapper :path="APPSTORE_CATEGORY_ICONS.featured" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcAppNavigationItem>\n\n\t\t\t\t<NcAppNavigationItem v-for="category in categories"\n\t\t\t\t\t:id="`app-category-${category.id}`"\n\t\t\t\t\t:key="category.id"\n\t\t\t\t\t:name="category.displayName"\n\t\t\t\t\t:to="{\n\t\t\t\t\t\tname: \'apps-category\',\n\t\t\t\t\t\tparams: { category: category.id },\n\t\t\t\t\t}">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<NcIconSvgWrapper :path="category.icon" />\n\t\t\t\t\t</template>\n\t\t\t\t</NcAppNavigationItem>\n\t\t\t</template>\n\n\t\t\t<NcAppNavigationItem id="app-developer-docs"\n\t\t\t\t:name="t(\'settings\', \'Developer documentation â†—\')"\n\t\t\t\t:href="developerDocsUrl" />\n\t\t</template>\n\t</NcAppNavigation>\n</template>\n\n<script setup lang="ts">\nimport { loadState } from \'@nextcloud/initial-state\'\nimport { translate as t } from \'@nextcloud/l10n\'\nimport { computed, onBeforeMount } from \'vue\'\nimport { APPS_SECTION_ENUM } from \'../constants/AppsConstants\'\nimport { useAppsStore } from \'../store/apps-store\'\n\nimport NcAppNavigation from \'@nextcloud/vue/components/NcAppNavigation\'\nimport NcAppNavigationItem from \'@nextcloud/vue/components/NcAppNavigationItem\'\nimport NcAppNavigationSpacer from \'@nextcloud/vue/components/NcAppNavigationSpacer\'\nimport NcCounterBubble from \'@nextcloud/vue/components/NcCounterBubble\'\nimport NcIconSvgWrapper from \'@nextcloud/vue/components/NcIconSvgWrapper\'\nimport NcLoadingIcon from \'@nextcloud/vue/components/NcLoadingIcon\'\n\nimport APPSTORE_CATEGORY_ICONS from \'../constants/AppstoreCategoryIcons.ts\'\n\nconst appstoreEnabled = loadState<boolean>(\'settings\', \'appstoreEnabled\', true)\nconst developerDocsUrl = loadState<string>(\'settings\', \'appstoreDeveloperDocs\', \'\')\n\nconst store = useAppsStore()\nconst categories = computed(() => store.categories)\nconst categoriesLoading = computed(() => store.loading.categories)\n\n/**\n * Check if the current instance has a support subscription from the Nextcloud GmbH\n *\n * For customers of the Nextcloud GmbH the app level will be set to `300` for apps that are supported in their subscription\n */\nconst isSubscribed = computed(() => store.apps.find(({ level }) => level === 300) !== undefined)\n\n// load categories when component is mounted\nonBeforeMount(() => {\n\tstore.loadCategories()\n\tstore.loadApps()\n})\n<\/script>\n\n<style scoped>\n/* The categories-loading indicator */\n.categories--loading {\n\tflex: 1;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n</style>\n'],sourceRoot:""}]);const p=s},23453:(e,n,a)=>{a.d(n,{A:()=>d});var i=a(85168),o=a(19051),s=a(63814),p=a(61338);const r=()=>o.Ay.get((0,s.KT)("core/navigation",2)+"/apps?format=json").then(t=>{let{data:e}=t;200===e.ocs.meta.statuscode&&((0,p.Ic)("nextcloud:app-menu.refresh",{apps:e.ocs.data}),window.dispatchEvent(new Event("resize")))}),l=window.OC.theme.productName,d={computed:{appGroups(){return this.app.groups.map(t=>({id:t,name:t}))},installing(){var t;return null!==(t=this.app)&&void 0!==t&&t.app_api?this.app&&!0===(null==this?void 0:this.appApiStore.getLoading("install")):this.$store.getters.loading("install")},isLoading(){var t;return null!==(t=this.app)&&void 0!==t&&t.app_api?this.app&&!0===(null==this?void 0:this.appApiStore.getLoading(this.app.id)):this.app&&this.$store.getters.loading(this.app.id)},isInitializing(){var t,e,n;return!(null===(t=this.app)||void 0===t||!t.app_api)&&this.app&&("init"===(null===(e=this.app)||void 0===e||null===(e=e.status)||void 0===e?void 0:e.action)||"healthcheck"===(null===(n=this.app)||void 0===n||null===(n=n.status)||void 0===n?void 0:n.action))},isDeploying(){var t,e;return!(null===(t=this.app)||void 0===t||!t.app_api)&&this.app&&"deploy"===(null===(e=this.app)||void 0===e||null===(e=e.status)||void 0===e?void 0:e.action)},isManualInstall(){var t,e;return!(null===(t=this.app)||void 0===t||!t.app_api)&&"manual-install"===(null===(e=this.app)||void 0===e||null===(e=e.daemon)||void 0===e?void 0:e.accepts_deploy_id)},updateButtonText(){var e,n,a;return null!==(e=this.app)&&void 0!==e&&e.app_api&&"manual-install"===(null===(n=this.app)||void 0===n||null===(n=n.daemon)||void 0===n?void 0:n.accepts_deploy_id)?t("settings","Manually installed apps cannot be updated"):t("settings","Update to {version}",{version:null===(a=this.app)||void 0===a?void 0:a.update})},enableButtonText(){var e,n,a,i,o,s,p,r,l,d,c;return null!==(e=this.app)&&void 0!==e&&e.app_api?this.app&&null!==(n=this.app)&&void 0!==n&&null!==(n=n.status)&&void 0!==n&&n.action&&"deploy"===(null===(a=this.app)||void 0===a||null===(a=a.status)||void 0===a?void 0:a.action)?t("settings","{progress}% Deploying â€¦",{progress:null!==(r=null===(l=this.app)||void 0===l||null===(l=l.status)||void 0===l?void 0:l.deploy)&&void 0!==r?r:0}):this.app&&null!==(i=this.app)&&void 0!==i&&null!==(i=i.status)&&void 0!==i&&i.action&&"init"===(null===(o=this.app)||void 0===o||null===(o=o.status)||void 0===o?void 0:o.action)?t("settings","{progress}% Initializing â€¦",{progress:null!==(d=null===(c=this.app)||void 0===c||null===(c=c.status)||void 0===c?void 0:c.init)&&void 0!==d?d:0}):this.app&&null!==(s=this.app)&&void 0!==s&&null!==(s=s.status)&&void 0!==s&&s.action&&"healthcheck"===(null===(p=this.app)||void 0===p||null===(p=p.status)||void 0===p?void 0:p.action)?t("settings","Health checking"):this.app.needsDownload?t("settings","Deploy and Enable"):t("settings","Enable"):this.app.needsDownload?t("settings","Download and enable"):t("settings","Enable")},disableButtonText(){var e;if(null!==(e=this.app)&&void 0!==e&&e.app_api){var n,a,i,o,s,p,r,l;if(this.app&&null!==(n=this.app)&&void 0!==n&&null!==(n=n.status)&&void 0!==n&&n.action&&"deploy"===(null===(a=this.app)||void 0===a||null===(a=a.status)||void 0===a?void 0:a.action))return t("settings","{progress}% Deploying â€¦",{progress:null===(r=this.app)||void 0===r||null===(r=r.status)||void 0===r?void 0:r.deploy});if(this.app&&null!==(i=this.app)&&void 0!==i&&null!==(i=i.status)&&void 0!==i&&i.action&&"init"===(null===(o=this.app)||void 0===o||null===(o=o.status)||void 0===o?void 0:o.action))return t("settings","{progress}% Initializing â€¦",{progress:null===(l=this.app)||void 0===l||null===(l=l.status)||void 0===l?void 0:l.init});if(this.app&&null!==(s=this.app)&&void 0!==s&&null!==(s=s.status)&&void 0!==s&&s.action&&"healthcheck"===(null===(p=this.app)||void 0===p||null===(p=p.status)||void 0===p?void 0:p.action))return t("settings","Health checking")}return t("settings","Disable")},forceEnableButtonText(){return this.app.needsDownload,t("settings","Allow untested app")},enableButtonTooltip(){var e;return null!==(e=this.app)&&void 0!==e&&e.app_api||!this.app.needsDownload?null:t("settings","The app will be downloaded from the App Store")},forceEnableButtonTooltip(){const e=t("settings","This app is not marked as compatible with your {productName} version.",{productName:l})+" "+t("settings","If you continue you will still be able to install the app. Note that the app might not work as expected.");return this.app.needsDownload?e+" "+t("settings","The app will be downloaded from the App Store"):e},defaultDeployDaemonAccessible(){var t,e,n,a,i,o;return null===(t=this.app)||void 0===t||!t.app_api||!(null===(e=this.app)||void 0===e||!e.daemon||"manual-install"!==(null===(n=this.app)||void 0===n||null===(n=n.daemon)||void 0===n?void 0:n.accepts_deploy_id))||("docker-install"===(null===(a=this.app)||void 0===a||null===(a=a.daemon)||void 0===a?void 0:a.accepts_deploy_id)&&(null===(i=this.appApiStore.getDefaultDaemon)||void 0===i?void 0:i.name)===(null===(o=this.app)||void 0===o||null===(o=o.daemon)||void 0===o?void 0:o.name)?!0===(null==this?void 0:this.appApiStore.getDaemonAccessible):null==this?void 0:this.appApiStore.getDaemonAccessible)}},data:()=>({groupCheckedAppsData:!1}),mounted(){this.app&&this.app.groups&&this.app.groups.length>0&&(this.groupCheckedAppsData=!0)},methods:{asyncFindGroup(t){return this.$store.dispatch("getGroups",{search:t,limit:5,offset:0})},isLimitedToGroups(t){var e;return(null===(e=this.app)||void 0===e||!e.app_api)&&(this.app.groups.length||this.groupCheckedAppsData)},setGroupLimit(){var t;null!==(t=this.app)&&void 0!==t&&t.app_api||this.groupCheckedAppsData||this.$store.dispatch("enableApp",{appId:this.app.id,groups:[]})},canLimitToGroups:t=>!(t.types&&t.types.includes("filesystem")||t.types.includes("prelogin")||t.types.includes("authentication")||t.types.includes("logging")||t.types.includes("prevent_group_restriction")||null!=t&&t.app_api),addGroupLimitation(t){var e;if(null!==(e=this.app)&&void 0!==e&&e.app_api)return;const n=t.pop(),a=this.app.groups.concat([]).concat([n.id]);this.$store.dispatch("enableApp",{appId:this.app.id,groups:a})},removeGroupLimitation(t){var e;if(null!==(e=this.app)&&void 0!==e&&e.app_api)return;const n=this.app.groups.concat([]),a=n.indexOf(t.id);a>-1&&n.splice(a,1),this.$store.dispatch("enableApp",{appId:this.app.id,groups:n})},forceEnable(t){var e;null!==(e=this.app)&&void 0!==e&&e.app_api?this.appApiStore.forceEnableApp(t).then(()=>{r()}).catch(t=>{(0,i.Qg)(t)}):this.$store.dispatch("forceEnableApp",{appId:t,groups:[]}).then(t=>{r()}).catch(t=>{(0,i.Qg)(t)})},enable(t){var e;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};null!==(e=this.app)&&void 0!==e&&e.app_api?this.appApiStore.enableApp(t,n,a).then(()=>{r()}).catch(t=>{(0,i.Qg)(t)}):this.$store.dispatch("enableApp",{appId:t,groups:[]}).then(t=>{r()}).catch(t=>{(0,i.Qg)(t)})},disable(t){var e;null!==(e=this.app)&&void 0!==e&&e.app_api?this.appApiStore.disableApp(t).then(()=>{r()}).catch(t=>{(0,i.Qg)(t)}):this.$store.dispatch("disableApp",{appId:t}).then(t=>{r()}).catch(t=>{(0,i.Qg)(t)})},async remove(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];try{var n;null!==(n=this.app)&&void 0!==n&&n.app_api?await this.appApiStore.uninstallApp(t,e):await this.$store.dispatch("uninstallApp",{appId:t,removeData:e}),await r()}catch(t){(0,i.Qg)(t)}},install(t){var e;null!==(e=this.app)&&void 0!==e&&e.app_api?this.appApiStore.enableApp(t).then(()=>{r()}).catch(t=>{(0,i.Qg)(t)}):this.$store.dispatch("enableApp",{appId:t}).then(t=>{r()}).catch(t=>{(0,i.Qg)(t)})},update(t){var e;null!==(e=this.app)&&void 0!==e&&e.app_api?this.appApiStore.updateApp(t).then(()=>{r()}).catch(t=>{(0,i.Qg)(t)}):this.$store.dispatch("updateApp",{appId:t}).catch(t=>{(0,i.Qg)(t)}).then(()=>{r(),this.store.updateCount=Math.max(this.store.updateCount-1,0)})}}}},24027:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,'.app-details[data-v-60bee524]{padding:20px}.app-details__actions-manage[data-v-60bee524]{display:flex;align-items:center}.app-details__actions-manage input[data-v-60bee524]{flex:0 1 auto;min-width:0;text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.app-details__authors[data-v-60bee524]{color:var(--color-text-maxcontrast)}.app-details__section[data-v-60bee524]{margin-top:15px}.app-details__section h4[data-v-60bee524]{font-size:16px;font-weight:bold;margin-block-end:5px}.app-details__interact[data-v-60bee524]{display:flex;flex-direction:row;flex-wrap:wrap;gap:12px}.app-details__documentation a[data-v-60bee524]{text-decoration:underline}.app-details__documentation li[data-v-60bee524]{padding-inline-start:20px}.app-details__documentation li[data-v-60bee524]::before{width:5px;height:5px;border-radius:100%;background-color:var(--color-main-text);content:"";float:inline-start;margin-inline-start:-13px;position:relative;top:10px}.force[data-v-60bee524]{color:var(--color-text-error);border-color:var(--color-border-error);background:var(--color-main-background)}.force[data-v-60bee524]:hover,.force[data-v-60bee524]:active{color:var(--color-main-background);border-color:var(--color-border-error) !important;background:var(--color-error)}.missing-dependencies[data-v-60bee524]{list-style:initial;list-style-type:initial;list-style-position:inside}',"",{version:3,sources:["webpack://./apps/settings/src/components/AppStoreSidebar/AppDetailsTab.vue"],names:[],mappings:"AACA,8BACC,YAAA,CAIC,8CAEC,YAAA,CACA,kBAAA,CACA,oDACC,aAAA,CACA,WAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CAIH,uCACC,mCAAA,CAGD,uCACC,eAAA,CAEA,0CACC,cAAA,CACA,gBAAA,CACA,oBAAA,CAIF,wCACC,YAAA,CACA,kBAAA,CACA,cAAA,CACA,QAAA,CAIA,+CACC,yBAAA,CAED,gDACC,yBAAA,CAEA,wDACC,SAAA,CACA,UAAA,CACA,kBAAA,CACA,uCAAA,CACA,UAAA,CACA,kBAAA,CACA,yBAAA,CACA,iBAAA,CACA,QAAA,CAMJ,wBACC,6BAAA,CACA,sCAAA,CACA,uCAAA,CAGD,6DAEC,kCAAA,CACA,iDAAA,CACA,6BAAA,CAGD,uCACC,kBAAA,CACA,uBAAA,CACA,0BAAA",sourcesContent:['\n.app-details {\n\tpadding: 20px;\n\n\t&__actions {\n\t\t// app management\n\t\t&-manage {\n\t\t\t// if too many, shrink them and ellipsis\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tinput {\n\t\t\t\tflex: 0 1 auto;\n\t\t\t\tmin-width: 0;\n\t\t\t\ttext-overflow: ellipsis;\n\t\t\t\twhite-space: nowrap;\n\t\t\t\toverflow: hidden;\n\t\t\t}\n\t\t}\n\t}\n\t&__authors {\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n\n\t&__section {\n\t\tmargin-top: 15px;\n\n\t\th4 {\n\t\t\tfont-size: 16px;\n\t\t\tfont-weight: bold;\n\t\t\tmargin-block-end: 5px;\n\t\t}\n\t}\n\n\t&__interact {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tflex-wrap: wrap;\n\t\tgap: 12px;\n\t}\n\n\t&__documentation {\n\t\ta {\n\t\t\ttext-decoration: underline;\n\t\t}\n\t\tli {\n\t\t\tpadding-inline-start: 20px;\n\n\t\t\t&::before {\n\t\t\t\twidth: 5px;\n\t\t\t\theight: 5px;\n\t\t\t\tborder-radius: 100%;\n\t\t\t\tbackground-color: var(--color-main-text);\n\t\t\t\tcontent: "";\n\t\t\t\tfloat: inline-start;\n\t\t\t\tmargin-inline-start: -13px;\n\t\t\t\tposition: relative;\n\t\t\t\ttop: 10px;\n\t\t\t}\n\t\t}\n\t}\n}\n\n.force {\n\tcolor: var(--color-text-error);\n\tborder-color: var(--color-border-error);\n\tbackground: var(--color-main-background);\n}\n\n.force:hover,\n.force:active {\n\tcolor: var(--color-main-background);\n\tborder-color: var(--color-border-error) !important;\n\tbackground: var(--color-error);\n}\n\n.missing-dependencies {\n\tlist-style: initial;\n\tlist-style-type: initial;\n\tlist-style-position: inside;\n}\n'],sourceRoot:""}]);const p=s},39698:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,'.settings-markdown[data-v-35d8331c] a{text-decoration:underline}.settings-markdown[data-v-35d8331c] a::after{content:"â†—";padding-inline:calc(var(--default-grid-baseline)/2)}.settings-markdown[data-v-35d8331c] pre{white-space:pre;overflow-x:auto;background-color:var(--color-background-dark);border-radius:var(--border-radius);padding:1em 1.3em;margin-bottom:1em}.settings-markdown[data-v-35d8331c] p code{background-color:var(--color-background-dark);border-radius:var(--border-radius);padding:.1em .3em}.settings-markdown[data-v-35d8331c] li{position:relative}.settings-markdown[data-v-35d8331c] ul,.settings-markdown[data-v-35d8331c] ol{padding-inline-start:10px;margin-inline-start:10px}.settings-markdown[data-v-35d8331c] ul li{list-style-type:disc}.settings-markdown[data-v-35d8331c] ul>li>ul>li{list-style-type:circle}.settings-markdown[data-v-35d8331c] ul>li>ul>li ul li{list-style-type:square}.settings-markdown[data-v-35d8331c] blockquote{padding-inline-start:1em;border-inline-start:4px solid var(--color-primary-element);color:var(--color-text-maxcontrast);margin-inline:0}',"",{version:3,sources:["webpack://./Markdown.vue","webpack://./apps/settings/src/components/Markdown.vue"],names:[],mappings:"AAAA,sCCEC,yBACC,CAAA,6CACA,WACC,CAAA,mDACA,CAAA,wCAIF,eACC,CAAA,eACA,CAAA,6CACA,CAAA,kCACA,CAAA,iBACA,CAAA,iBACA,CAAA,2CAGD,6CACC,CAAA,kCACA,CAAA,iBACA,CAAA,uCAGD,iBACC,CAAA,8EAGD,yBACC,CAAA,wBACA,CAAA,0CAGD,oBACC,CAAA,gDAGD,sBACC,CAAA,sDAGD,sBACC,CAAA,+CAGD,wBACC,CAAA,0DACA,CAAA,mCACA,CAAA,eACA",sourcesContent:['.settings-markdown :deep a{text-decoration:underline}.settings-markdown :deep a::after{content:"â†—";padding-inline:calc(var(--default-grid-baseline)/2)}.settings-markdown :deep pre{white-space:pre;overflow-x:auto;background-color:var(--color-background-dark);border-radius:var(--border-radius);padding:1em 1.3em;margin-bottom:1em}.settings-markdown :deep p code{background-color:var(--color-background-dark);border-radius:var(--border-radius);padding:.1em .3em}.settings-markdown :deep li{position:relative}.settings-markdown :deep ul,.settings-markdown :deep ol{padding-inline-start:10px;margin-inline-start:10px}.settings-markdown :deep ul li{list-style-type:disc}.settings-markdown :deep ul>li>ul>li{list-style-type:circle}.settings-markdown :deep ul>li>ul>li ul li{list-style-type:square}.settings-markdown :deep blockquote{padding-inline-start:1em;border-inline-start:4px solid var(--color-primary-element);color:var(--color-text-maxcontrast);margin-inline:0}',"\n.settings-markdown :deep {\n\ta {\n\t\ttext-decoration: underline;\n\t\t&::after {\n\t\t\tcontent: 'â†—';\n\t\t\tpadding-inline: calc(var(--default-grid-baseline) / 2);\n\t\t}\n\t}\n\n\tpre {\n\t\twhite-space: pre;\n\t\toverflow-x: auto;\n\t\tbackground-color: var(--color-background-dark);\n\t\tborder-radius: var(--border-radius);\n\t\tpadding: 1em 1.3em;\n\t\tmargin-bottom: 1em;\n\t}\n\n\tp code {\n\t\tbackground-color: var(--color-background-dark);\n\t\tborder-radius: var(--border-radius);\n\t\tpadding: .1em .3em;\n\t}\n\n\tli {\n\t\tposition: relative;\n\t}\n\n\tul, ol {\n\t\tpadding-inline-start: 10px;\n\t\tmargin-inline-start: 10px;\n\t}\n\n\tul li {\n\t\tlist-style-type: disc;\n\t}\n\n\tul > li > ul > li {\n\t\tlist-style-type: circle;\n\t}\n\n\tul > li > ul > li ul li {\n\t\tlist-style-type: square;\n\t}\n\n\tblockquote {\n\t\tpadding-inline-start: 1em;\n\t\tborder-inline-start: 4px solid var(--color-primary-element);\n\t\tcolor: var(--color-text-maxcontrast);\n\t\tmargin-inline: 0;\n\t}\n}\n"],sourceRoot:""}]);const p=s},40771:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,".daemon-selection-list[data-v-07c487de]{max-height:350px;overflow-y:scroll;padding:2rem}.daemon-selection-list__empty-content[data-v-07c487de]{margin-top:0;text-align:center}","",{version:3,sources:["webpack://./apps/settings/src/components/AppAPI/DaemonSelectionList.vue"],names:[],mappings:"AACA,wCACC,gBAAA,CACA,iBAAA,CACA,YAAA,CAEA,uDACC,YAAA,CACA,iBAAA",sourcesContent:["\n.daemon-selection-list {\n\tmax-height: 350px;\n\toverflow-y: scroll;\n\tpadding: 2rem;\n\n\t&__empty-content {\n\t\tmargin-top: 0;\n\t\ttext-align: center;\n\t}\n}\n"],sourceRoot:""}]);const p=s},47780:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,".app-level-badge[data-v-4f1ef3a1]{color:var(--color-text-maxcontrast);background-color:rgba(0,0,0,0);border:1px solid var(--color-text-maxcontrast);border-radius:var(--border-radius);display:flex;flex-direction:row;gap:6px;padding:3px 6px;width:fit-content}.app-level-badge--supported[data-v-4f1ef3a1]{background-color:var(--color-success);border-color:var(--color-border-success);color:var(--color-success-text)}","",{version:3,sources:["webpack://./apps/settings/src/components/AppList/AppLevelBadge.vue"],names:[],mappings:"AACA,kCACC,mCAAA,CACA,8BAAA,CACA,8CAAA,CACA,kCAAA,CAEA,YAAA,CACA,kBAAA,CACA,OAAA,CACA,eAAA,CACA,iBAAA,CAEA,6CACC,qCAAA,CACA,wCAAA,CACA,+BAAA",sourcesContent:["\n.app-level-badge {\n\tcolor: var(--color-text-maxcontrast);\n\tbackground-color: transparent;\n\tborder: 1px solid var(--color-text-maxcontrast);\n\tborder-radius: var(--border-radius);\n\n\tdisplay: flex;\n\tflex-direction: row;\n\tgap: 6px;\n\tpadding: 3px 6px;\n\twidth: fit-content;\n\n\t&--supported {\n\t\tbackground-color: var(--color-success);\n\t\tborder-color: var(--color-border-success);\n\t\tcolor: var(--color-success-text);\n\t}\n}\n"],sourceRoot:""}]);const p=s},53934:(e,n,a)=>{a.r(n),a.d(n,{default:()=>xt});var i=a(85471),o=a(53334),s=a(24387),p=a(846),r=a(80065),l=a(6695),d=a(99148),c=a(9165),u=a(18608),A=a(60023),g=a(99418);const m={name:"Markdown",props:{text:{type:String,default:""},minHeading:{type:Number,default:1}},computed:{renderMarkdown(){const t=new A.xI.Renderer;return t.link=function(t){let e,{href:n,title:a,text:i}=t;try{e=decodeURIComponent(unescape(n)).replace(/[^\w:]/g,"").toLowerCase()}catch(t){return""}if(0!==e.indexOf("http:")&&0!==e.indexOf("https:"))return"";let o='<a href="'+n+'" rel="noreferrer noopener"';return a&&(o+=' title="'+a+'"'),o+=">"+i+"</a>",o},t.heading=t=>{let{text:e,depth:n}=t;return n=Math.min(6,n+(this.minHeading-1)),"<h".concat(n,">").concat(e,"</h").concat(n,">")},t.image=t=>{let{title:e,text:n}=t;return n||e},t.blockquote=t=>{let{text:e}=t;return"<blockquote>".concat(e,"</blockquote>")},g.A.sanitize((0,A.xI)(this.text.trim(),{renderer:t,gfm:!1,highlight:!1,tables:!1,breaks:!1,pedantic:!1,sanitize:!0,smartLists:!0,smartypants:!1}),{SAFE_FOR_JQUERY:!0,ALLOWED_TAGS:["h1","h2","h3","h4","h5","h6","strong","p","a","ul","ol","li","em","del","blockquote"]})}}};var v=a(85072),h=a.n(v),b=a(97825),C=a.n(b),f=a(77659),y=a.n(f),_=a(55056),x=a.n(_),w=a(10540),S=a.n(w),k=a(41113),N=a.n(k),D=a(39698),I={};I.styleTagTransform=N(),I.setAttributes=x(),I.insert=y().bind(null,"head"),I.domAPI=C(),I.insertStyleElement=S(),h()(D.A,I),D.A&&D.A.locals&&D.A.locals;var T=a(14486);const E=(0,T.A)(m,function(){var t=this;return(0,t._self._c)("div",{staticClass:"settings-markdown",domProps:{innerHTML:t._s(t.renderMarkdown)}})},[],!1,null,"35d8331c",null).exports,O=(0,i.pM)({__name:"AppDescriptionTab",props:{app:null},setup:t=>({__sfc:!0,mdiTextShort:c.azb,t:o.Tl,NcAppSidebarTab:u.A,NcIconSvgWrapper:l.A,Markdown:E})});var B=a(73855),P={};P.styleTagTransform=N(),P.setAttributes=x(),P.insert=y().bind(null,"head"),P.domAPI=C(),P.insertStyleElement=S(),h()(B.A,P),B.A&&B.A.locals&&B.A.locals;const M=(0,T.A)(O,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcAppSidebarTab,{attrs:{id:"desc",name:n.t("settings","Description"),order:0},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:n.mdiTextShort}})]},proxy:!0}])},[t._v(" "),e("div",{staticClass:"app-description"},[e(n.Markdown,{attrs:{text:t.app.description,"min-heading":4}})],1)])},[],!1,null,"10fcea52",null).exports;var $=a(61338),L=a(21376),R=a(4604),W=a(67607),U=a(32073),G=a(19051),F=a(63814),z=a(81222),j=a(94219),V=a(82182),q=a(3226),H=a(62938),Y=a(23453);const Q={name:"AppDeployOptionsModal",components:{NcDialog:j.A,NcTextField:V.A,NcButton:L.A,NcNoteCard:q.A,NcCheckboxRadioSwitch:U.A,NcIconSvgWrapper:l.A},mixins:[Y.A],props:{app:{type:Object,required:!0},show:{type:Boolean,required:!0}},setup(t){const e=(0,p.T)(),n=(0,H.a)(),a=(0,i.EW)(()=>{var e,n;return 1===(null===(e=t.app)||void 0===e||null===(e=e.releases)||void 0===e?void 0:e.length)&&(null===(n=t.app)||void 0===n||null===(n=n.releases[0])||void 0===n?void 0:n.environmentVariables)||[]}),o=(0,i.KR)({environment_variables:a.value.reduce((t,e)=>(t[e.envName]=e.default||"",t),{}),mounts:[]});return{environmentVariables:a,deployOptions:o,store:e,appApiStore:n,mdiPlus:c.biz,mdiCheck:c.Tfj,mdiClose:c.hyP,mdiDeleteOutline:c.Chp}},data:()=>({addingMount:!1,newMountPoint:{hostPath:"",containerPath:"",readonly:!1},addingPortBinding:!1,configuredDeployOptions:null,deployOptionsDocsUrl:(0,z.C)("settings","deployOptionsDocsUrl",null)}),watch:{show(t){t?this.fetchExAppDeployOptions():this.configuredDeployOptions=null}},methods:{startAddingMount(){this.addingMount=!0,this.$nextTick(()=>{this.$refs.newMountHostPath.focus()})},addMountPoint(){this.deployOptions.mounts.push(this.newMountPoint),this.newMountPoint={hostPath:"",containerPath:"",readonly:!1},this.addingMount=!1},cancelAddMountPoint(){this.newMountPoint={hostPath:"",containerPath:"",readonly:!1},this.addingMount=!1},removeMount(t){this.deployOptions.mounts=this.deployOptions.mounts.filter(e=>e!==t)},async fetchExAppDeployOptions(){return G.Ay.get((0,F.Jv)("/apps/app_api/apps/deploy-options/".concat(this.app.id))).then(t=>{this.configuredDeployOptions=t.data}).catch(()=>{this.configuredDeployOptions=null})},async submitDeployOptions(){await this.appApiStore.fetchDockerDaemons(),1===this.appApiStore.dockerDaemons.length&&this.app.needsDownload?this.enable(this.app.id,this.appApiStore.dockerDaemons[0],this.deployOptions):this.app.needsDownload?(0,$.Ic)("showDaemonSelectionModal",this.deployOptions):this.enable(this.app.id,this.app.daemon,this.deployOptions),this.$emit("update:show",!1)}}};var K=a(70339),J={};J.styleTagTransform=N(),J.setAttributes=x(),J.insert=y().bind(null,"head"),J.domAPI=C(),J.insertStyleElement=S(),h()(K.A,J),K.A&&K.A.locals&&K.A.locals;const X=(0,T.A)(Q,function(){var t=this,e=t._self._c;return e("NcDialog",{attrs:{open:t.show,size:"normal",name:t.t("settings","Advanced deploy options")},on:{"update:open":function(e){return t.$emit("update:show",e)}},scopedSlots:t._u([t.app.active||!t.app.canInstall&&!t.app.isCompatible||null!==t.configuredDeployOptions?null:{key:"actions",fn:function(){return[e("NcButton",{attrs:{title:t.enableButtonTooltip,"aria-label":t.enableButtonTooltip,type:"primary",disabled:!t.app.canInstall||t.installing||t.isLoading||!t.defaultDeployDaemonAccessible||t.isInitializing||t.isDeploying},on:{click:function(e){return e.stopPropagation(),t.submitDeployOptions.apply(null,arguments)}}},[t._v("\n\t\t\t"+t._s(t.enableButtonText)+"\n\t\t")])]},proxy:!0}],null,!0)},[e("div",{staticClass:"modal__content"},[e("p",{staticClass:"deploy-option__hint"},[t._v("\n\t\t\t"+t._s(null===t.configuredDeployOptions?t.t("settings","Edit ExApp deploy options before installation"):t.t("settings","Configured ExApp deploy options. Can be set only during installation"))+".\n\t\t\t"),t.deployOptionsDocsUrl?e("a",{attrs:{href:t.deployOptionsDocsUrl}},[t._v("\n\t\t\t\t"+t._s(t.t("settings","Learn more"))+"\n\t\t\t")]):t._e()]),t._v(" "),t.environmentVariables.length>0||null!==t.configuredDeployOptions&&t.configuredDeployOptions.environment_variables.length>0?e("h3",[t._v("\n\t\t\t"+t._s(t.t("settings","Environment variables"))+"\n\t\t")]):t._e(),t._v(" "),null===t.configuredDeployOptions?t._l(t.environmentVariables,function(n){return e("div",{key:n.envName,staticClass:"deploy-option"},[e("NcTextField",{attrs:{label:n.displayName,value:t.deployOptions.environment_variables[n.envName]},on:{"update:value":function(e){return t.$set(t.deployOptions.environment_variables,n.envName,e)}}}),t._v(" "),e("p",{staticClass:"deploy-option__hint"},[t._v("\n\t\t\t\t\t"+t._s(n.description)+"\n\t\t\t\t")])],1)}):Object.keys(t.configuredDeployOptions).length>0?e("fieldset",{staticClass:"envs"},[e("legend",{staticClass:"deploy-option__hint"},[t._v("\n\t\t\t\t"+t._s(t.t("settings","ExApp container environment variables"))+"\n\t\t\t")]),t._v(" "),t._l(t.configuredDeployOptions.environment_variables,function(t,n){var a;return e("NcTextField",{key:n,attrs:{label:null!==(a=t.displayName)&&void 0!==a?a:n,"helper-text":t.description,value:t.value,readonly:""}})})],2):[e("p",{staticClass:"deploy-option__hint"},[t._v("\n\t\t\t\t"+t._s(t.t("settings","No environment variables defined"))+"\n\t\t\t")])],t._v(" "),e("h3",[t._v(t._s(t.t("settings","Mounts")))]),t._v(" "),null===t.configuredDeployOptions?[e("p",{staticClass:"deploy-option__hint"},[t._v("\n\t\t\t\t"+t._s(t.t("settings","Define host folder mounts to bind to the ExApp container"))+"\n\t\t\t")]),t._v(" "),e("NcNoteCard",{attrs:{type:"info",text:t.t("settings","Must exist on the Deploy daemon host prior to installing the ExApp")}}),t._v(" "),t._l(t.deployOptions.mounts,function(n){return e("div",{key:n.hostPath,staticClass:"deploy-option",staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","flex-direction":"row"}},[e("NcTextField",{attrs:{label:t.t("settings","Host path"),value:n.hostPath},on:{"update:value":function(e){return t.$set(n,"hostPath",e)}}}),t._v(" "),e("NcTextField",{attrs:{label:t.t("settings","Container path"),value:n.containerPath},on:{"update:value":function(e){return t.$set(n,"containerPath",e)}}}),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{checked:n.readonly},on:{"update:checked":function(e){return t.$set(n,"readonly",e)}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("settings","Read-only"))+"\n\t\t\t\t")]),t._v(" "),e("NcButton",{staticStyle:{"margin-top":"6px"},attrs:{"aria-label":t.t("settings","Remove mount")},on:{click:function(e){return t.removeMount(n)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("NcIconSvgWrapper",{attrs:{path:t.mdiDeleteOutline}})]},proxy:!0}],null,!0)})],1)}),t._v(" "),t.addingMount?e("div",{staticClass:"deploy-option"},[e("h4",[t._v("\n\t\t\t\t\t"+t._s(t.t("settings","New mount"))+"\n\t\t\t\t")]),t._v(" "),e("div",{staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","flex-direction":"row"}},[e("NcTextField",{ref:"newMountHostPath",attrs:{label:t.t("settings","Host path"),"aria-label":t.t("settings","Enter path to host folder"),value:t.newMountPoint.hostPath},on:{"update:value":function(e){return t.$set(t.newMountPoint,"hostPath",e)}}}),t._v(" "),e("NcTextField",{attrs:{label:t.t("settings","Container path"),"aria-label":t.t("settings","Enter path to container folder"),value:t.newMountPoint.containerPath},on:{"update:value":function(e){return t.$set(t.newMountPoint,"containerPath",e)}}}),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{checked:t.newMountPoint.readonly,"aria-label":t.t("settings","Toggle read-only mode")},on:{"update:checked":function(e){return t.$set(t.newMountPoint,"readonly",e)}}},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("settings","Read-only"))+"\n\t\t\t\t\t")])],1),t._v(" "),e("div",{staticStyle:{display:"flex","align-items":"center","margin-top":"4px"}},[e("NcButton",{attrs:{"aria-label":t.t("settings","Confirm adding new mount")},on:{click:t.addMountPoint},scopedSlots:t._u([{key:"icon",fn:function(){return[e("NcIconSvgWrapper",{attrs:{path:t.mdiCheck}})]},proxy:!0}],null,!1,1018299955)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("settings","Confirm"))+"\n\t\t\t\t\t")]),t._v(" "),e("NcButton",{staticStyle:{"margin-left":"4px"},attrs:{"aria-label":t.t("settings","Cancel adding mount")},on:{click:t.cancelAddMountPoint},scopedSlots:t._u([{key:"icon",fn:function(){return[e("NcIconSvgWrapper",{attrs:{path:t.mdiClose}})]},proxy:!0}],null,!1,2764082467)},[t._v("\n\t\t\t\t\t\t"+t._s(t.t("settings","Cancel"))+"\n\t\t\t\t\t")])],1)]):t._e(),t._v(" "),t.addingMount?t._e():e("NcButton",{staticStyle:{"margin-top":"5px"},attrs:{"aria-label":t.t("settings","Add mount")},on:{click:t.startAddingMount},scopedSlots:t._u([{key:"icon",fn:function(){return[e("NcIconSvgWrapper",{attrs:{path:t.mdiPlus}})]},proxy:!0}],null,!1,103601839)},[t._v("\n\t\t\t\t"+t._s(t.t("settings","Add mount"))+"\n\t\t\t")])]:t.configuredDeployOptions.mounts.length>0?[e("p",{staticClass:"deploy-option__hint"},[t._v("\n\t\t\t\t"+t._s(t.t("settings","ExApp container mounts"))+"\n\t\t\t")]),t._v(" "),t._l(t.configuredDeployOptions.mounts,function(n){return e("div",{key:n.hostPath,staticClass:"deploy-option",staticStyle:{display:"flex","align-items":"center","justify-content":"space-between","flex-direction":"row"}},[e("NcTextField",{attrs:{label:t.t("settings","Host path"),value:n.hostPath,readonly:""},on:{"update:value":function(e){return t.$set(n,"hostPath",e)}}}),t._v(" "),e("NcTextField",{attrs:{label:t.t("settings","Container path"),value:n.containerPath,readonly:""},on:{"update:value":function(e){return t.$set(n,"containerPath",e)}}}),t._v(" "),e("NcCheckboxRadioSwitch",{attrs:{checked:n.readonly,disabled:""},on:{"update:checked":function(e){return t.$set(n,"readonly",e)}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("settings","Read-only"))+"\n\t\t\t\t")])],1)})]:e("p",{staticClass:"deploy-option__hint"},[t._v("\n\t\t\t"+t._s(t.t("settings","No mounts defined"))+"\n\t\t")])],2)])},[],!1,null,"d7fb3b54",null).exports;var Z=a(99002);const tt={name:"AppDetailsTab",components:{NcAppSidebarTab:u.A,NcButton:L.A,NcDateTime:R.A,NcIconSvgWrapper:l.A,NcSelect:W.default,NcCheckboxRadioSwitch:U.A,AppDeployOptionsModal:X,DaemonSelectionDialog:Z.A},mixins:[Y.A],props:{app:{type:Object,required:!0}},setup:()=>({store:(0,p.T)(),appApiStore:(0,H.a)(),productName:window.OC.theme.productName,mdiBugOutline:c.Le7,mdiFeatureSearchOutline:c.Jtd,mdiStar:c.ZL5,mdiTextBoxOutline:c.fXo,mdiTooltipQuestionOutline:c.knh,mdiToyBrickPlusOutline:c.eqc}),data:()=>({groupCheckedAppsData:!1,removeData:!1,showDeployOptionsModal:!1,showSelectDaemonModal:!1,deployOptions:null}),computed:{lastModified(){var t,e,n;return null!==(t=(null!==(e=null===(n=this.app.appstoreData)||void 0===n?void 0:n.releases)&&void 0!==e?e:[]).map(t=>{let{lastModified:e}=t;return Date.parse(e)}).sort().at(0))&&void 0!==t?t:null},appAuthors(){if(console.warn(this.app),!this.app)return"";const t=t=>t["@value"]?t["@value"]:t;return(Array.isArray(this.app.author)?this.app.author.map(t):[t(this.app.author)]).sort((t,e)=>t.split(" ").at(-1).localeCompare(e.split(" ").at(-1))).join(", ")},appstoreUrl(){return"https://apps.nextcloud.com/apps/".concat(this.app.id)},externalResources(){const e=[];return this.app.internal||e.push({id:"appstore",href:this.appstoreUrl,label:t("settings","View in store")}),this.app.website&&e.push({id:"website",href:this.app.website,label:t("settings","Visit website")}),this.app.documentation&&(this.app.documentation.user&&e.push({id:"doc-user",href:this.app.documentation.user,label:t("settings","Usage documentation")}),this.app.documentation.admin&&e.push({id:"doc-admin",href:this.app.documentation.admin,label:t("settings","Admin documentation")}),this.app.documentation.developer&&e.push({id:"doc-developer",href:this.app.documentation.developer,label:t("settings","Developer documentation")})),e},appCategories(){return[this.app.category].flat().map(t=>{var e,n;return null!==(e=null===(n=this.store.getCategoryById(t))||void 0===n?void 0:n.displayName)&&void 0!==e?e:t}).join(", ")},rateAppUrl(){return"".concat(this.appstoreUrl,"#comments")},appGroups(){return this.app.groups.map(t=>({id:t,name:t}))},groups(){return this.$store.getters.getGroups.filter(t=>"disabled"!==t.id).sort((t,e)=>t.name.localeCompare(e.name))}},watch:{"app.id"(){this.removeData=!1}},beforeUnmount(){this.deployOptions=null,(0,$.al)("showDaemonSelectionModal")},mounted(){this.app.groups.length>0&&(this.groupCheckedAppsData=!0),(0,$.B1)("showDaemonSelectionModal",t=>{this.showSelectionModal(t)})},methods:{toggleRemoveData(){this.removeData=!this.removeData},showSelectionModal(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.deployOptions=t,this.showSelectDaemonModal=!0},async enableButtonAction(){var t;null!==(t=this.app)&&void 0!==t&&t.app_api?(await this.appApiStore.fetchDockerDaemons(),1===this.appApiStore.dockerDaemons.length&&this.app.needsDownload?this.enable(this.app.id,this.appApiStore.dockerDaemons[0]):this.app.needsDownload?this.showSelectionModal():this.enable(this.app.id,this.app.daemon)):this.enable(this.app.id)}}};var et=a(24027),nt={};nt.styleTagTransform=N(),nt.setAttributes=x(),nt.insert=y().bind(null,"head"),nt.domAPI=C(),nt.insertStyleElement=S(),h()(et.A,nt),et.A&&et.A.locals&&et.A.locals;const at=(0,T.A)(tt,function(){var t,e,n,a,i,o,s=this,p=s._self._c;return p("NcAppSidebarTab",{attrs:{id:"details",name:s.t("settings","Details"),order:1},scopedSlots:s._u([{key:"icon",fn:function(){return[p("NcIconSvgWrapper",{attrs:{path:s.mdiTextBoxOutline}})]},proxy:!0}])},[s._v(" "),p("div",{staticClass:"app-details"},[p("div",{staticClass:"app-details__actions"},[s.app.active&&s.canLimitToGroups(s.app)?p("div",{staticClass:"app-details__actions-groups"},[p("input",{directives:[{name:"model",rawName:"v-model",value:s.groupCheckedAppsData,expression:"groupCheckedAppsData"}],staticClass:"groups-enable__checkbox checkbox",attrs:{id:"groups_enable_".concat(s.app.id),type:"checkbox"},domProps:{value:s.app.id,checked:Array.isArray(s.groupCheckedAppsData)?s._i(s.groupCheckedAppsData,s.app.id)>-1:s.groupCheckedAppsData},on:{change:[function(t){var e=s.groupCheckedAppsData,n=t.target,a=!!n.checked;if(Array.isArray(e)){var i=s.app.id,o=s._i(e,i);n.checked?o<0&&(s.groupCheckedAppsData=e.concat([i])):o>-1&&(s.groupCheckedAppsData=e.slice(0,o).concat(e.slice(o+1)))}else s.groupCheckedAppsData=a},s.setGroupLimit]}}),s._v(" "),p("label",{attrs:{for:"groups_enable_".concat(s.app.id)}},[s._v(s._s(s.t("settings","Limit to groups")))]),s._v(" "),p("input",{staticClass:"group_select",attrs:{type:"hidden",title:s.t("settings","All"),value:""}}),s._v(" "),p("br"),s._v(" "),p("label",{attrs:{for:"limitToGroups"}},[p("span",[s._v(s._s(s.t("settings","Limit app usage to groups")))])]),s._v(" "),s.isLimitedToGroups(s.app)?p("NcSelect",{attrs:{"input-id":"limitToGroups",options:s.groups,value:s.appGroups,limit:5,label:"name",multiple:!0,"close-on-select":!1},on:{"option:selected":s.addGroupLimitation,"option:deselected":s.removeGroupLimitation,search:s.asyncFindGroup}},[p("span",{attrs:{slot:"noResult"},slot:"noResult"},[s._v(s._s(s.t("settings","No results")))])]):s._e()],1):s._e(),s._v(" "),p("div",{staticClass:"app-details__actions-manage"},[s.app.update?p("input",{staticClass:"update primary",attrs:{type:"button",value:s.t("settings","Update to {version}",{version:s.app.update}),disabled:s.installing||s.isLoading||s.isManualInstall},on:{click:function(t){return s.update(s.app.id)}}}):s._e(),s._v(" "),s.app.canUnInstall?p("input",{staticClass:"uninstall",attrs:{type:"button",value:s.t("settings","Remove"),disabled:s.installing||s.isLoading},on:{click:function(t){return s.remove(s.app.id,s.removeData)}}}):s._e(),s._v(" "),s.app.active?p("input",{staticClass:"enable",attrs:{type:"button",value:s.disableButtonText,disabled:s.installing||s.isLoading||s.isInitializing||s.isDeploying},on:{click:function(t){return s.disable(s.app.id)}}}):s._e(),s._v(" "),s.app.active||!s.app.canInstall&&!s.app.isCompatible?s.app.active||s.app.canInstall?s._e():p("input",{staticClass:"enable force",attrs:{title:s.forceEnableButtonTooltip,"aria-label":s.forceEnableButtonTooltip,type:"button",value:s.forceEnableButtonText,disabled:s.installing||s.isLoading},on:{click:function(t){return s.forceEnable(s.app.id)}}}):p("input",{staticClass:"enable primary",attrs:{title:s.enableButtonTooltip,"aria-label":s.enableButtonTooltip,type:"button",value:s.enableButtonText,disabled:!s.app.canInstall||s.installing||s.isLoading||!s.defaultDeployDaemonAccessible||s.isInitializing||s.isDeploying},on:{click:s.enableButtonAction}}),s._v(" "),null!==(t=s.app)&&void 0!==t&&t.app_api&&(s.app.canInstall||s.app.isCompatible)?p("NcButton",{attrs:{"aria-label":s.t("settings","Advanced deploy options"),type:"secondary"},on:{click:()=>s.showDeployOptionsModal=!0},scopedSlots:s._u([{key:"icon",fn:function(){return[p("NcIconSvgWrapper",{attrs:{path:s.mdiToyBrickPlusOutline}})]},proxy:!0}],null,!1,973660380)},[s._v("\n\t\t\t\t\t"+s._s(s.t("settings","Deploy options"))+"\n\t\t\t\t")]):s._e()],1),s._v(" "),s.defaultDeployDaemonAccessible?s._e():p("p",{staticClass:"warning"},[s._v("\n\t\t\t\t"+s._s(s.t("settings","Default Deploy daemon is not accessible"))+"\n\t\t\t")]),s._v(" "),s.app.canUnInstall?p("NcCheckboxRadioSwitch",{attrs:{checked:s.removeData,disabled:s.installing||s.isLoading||!s.defaultDeployDaemonAccessible},on:{"update:checked":s.toggleRemoveData}},[s._v("\n\t\t\t\t"+s._s(s.t("settings","Delete data on remove"))+"\n\t\t\t")]):s._e()],1),s._v(" "),p("ul",{staticClass:"app-details__dependencies"},[s.app.missingMinOwnCloudVersion?p("li",[s._v("\n\t\t\t\t"+s._s(s.t("settings","This app has no minimum {productName} version assigned. This will be an error in the future.",{productName:s.productName}))+"\n\t\t\t")]):s._e(),s._v(" "),s.app.missingMaxOwnCloudVersion?p("li",[s._v("\n\t\t\t\t"+s._s(s.t("settings","This app has no maximum {productName} version assigned. This will be an error in the future.",{productName:s.productName}))+"\n\t\t\t")]):s._e(),s._v(" "),s.app.canInstall?s._e():p("li",[s._v("\n\t\t\t\t"+s._s(s.t("settings","This app cannot be installed because the following dependencies are not fulfilled:"))+"\n\t\t\t\t"),p("ul",{staticClass:"missing-dependencies"},s._l(s.app.missingDependencies,function(t,e){return p("li",{key:e},[s._v("\n\t\t\t\t\t\t"+s._s(t)+"\n\t\t\t\t\t")])}),0)])]),s._v(" "),s.lastModified&&!s.app.shipped?p("div",{staticClass:"app-details__section"},[p("h4",[s._v("\n\t\t\t\t"+s._s(s.t("settings","Latest updated"))+"\n\t\t\t")]),s._v(" "),p("NcDateTime",{attrs:{timestamp:s.lastModified}})],1):s._e(),s._v(" "),p("div",{staticClass:"app-details__section"},[p("h4",[s._v("\n\t\t\t\t"+s._s(s.t("settings","Author"))+"\n\t\t\t")]),s._v(" "),p("p",{staticClass:"app-details__authors"},[s._v("\n\t\t\t\t"+s._s(s.appAuthors)+"\n\t\t\t")])]),s._v(" "),p("div",{staticClass:"app-details__section"},[p("h4",[s._v("\n\t\t\t\t"+s._s(s.t("settings","Categories"))+"\n\t\t\t")]),s._v(" "),p("p",[s._v("\n\t\t\t\t"+s._s(s.appCategories)+"\n\t\t\t")])]),s._v(" "),s.externalResources.length>0?p("div",{staticClass:"app-details__section"},[p("h4",[s._v(s._s(s.t("settings","Resources")))]),s._v(" "),p("ul",{staticClass:"app-details__documentation",attrs:{"aria-label":s.t("settings","Documentation")}},s._l(s.externalResources,function(t){return p("li",{key:t.id},[p("a",{staticClass:"appslink",attrs:{href:t.href,target:"_blank",rel:"noreferrer noopener"}},[s._v("\n\t\t\t\t\t\t"+s._s(t.label)+" â†—\n\t\t\t\t\t")])])}),0)]):s._e(),s._v(" "),p("div",{staticClass:"app-details__section"},[p("h4",[s._v(s._s(s.t("settings","Interact")))]),s._v(" "),p("div",{staticClass:"app-details__interact"},[p("NcButton",{attrs:{disabled:!s.app.bugs,href:null!==(e=s.app.bugs)&&void 0!==e?e:"#","aria-label":s.t("settings","Report a bug"),title:s.t("settings","Report a bug")},scopedSlots:s._u([{key:"icon",fn:function(){return[p("NcIconSvgWrapper",{attrs:{path:s.mdiBugOutline}})]},proxy:!0}])}),s._v(" "),p("NcButton",{attrs:{disabled:!s.app.bugs,href:null!==(n=s.app.bugs)&&void 0!==n?n:"#","aria-label":s.t("settings","Request feature"),title:s.t("settings","Request feature")},scopedSlots:s._u([{key:"icon",fn:function(){return[p("NcIconSvgWrapper",{attrs:{path:s.mdiFeatureSearchOutline}})]},proxy:!0}])}),s._v(" "),null!==(a=s.app.appstoreData)&&void 0!==a&&a.discussion?p("NcButton",{attrs:{href:s.app.appstoreData.discussion,"aria-label":s.t("settings","Ask questions or discuss"),title:s.t("settings","Ask questions or discuss")},scopedSlots:s._u([{key:"icon",fn:function(){return[p("NcIconSvgWrapper",{attrs:{path:s.mdiTooltipQuestionOutline}})]},proxy:!0}],null,!1,88743630)}):s._e(),s._v(" "),s.app.internal?s._e():p("NcButton",{attrs:{href:s.rateAppUrl,"aria-label":s.t("settings","Rate the app"),title:s.t("settings","Rate")},scopedSlots:s._u([{key:"icon",fn:function(){return[p("NcIconSvgWrapper",{attrs:{path:s.mdiStar}})]},proxy:!0}],null,!1,422450625)})],1)]),s._v(" "),null!==(i=s.app)&&void 0!==i&&i.app_api?p("AppDeployOptionsModal",{attrs:{show:s.showDeployOptionsModal,app:s.app},on:{"update:show":function(t){s.showDeployOptionsModal=t}}}):s._e(),s._v(" "),null!==(o=s.app)&&void 0!==o&&o.app_api?p("DaemonSelectionDialog",{attrs:{show:s.showSelectDaemonModal,app:s.app,"deploy-options":s.deployOptions},on:{"update:show":function(t){s.showSelectDaemonModal=t}}}):s._e()],1)])},[],!1,null,"60bee524",null).exports,it=(0,i.pM)({__name:"AppReleasesTab",props:{app:null},setup(t){const e=t,n=(0,i.EW)(()=>{var t,n;return Object.values(null!==(t=null===(n=e.app.releases)||void 0===n||null===(n=n[0])||void 0===n?void 0:n.translations)&&void 0!==t?t:{}).some(t=>{let{changelog:e}=t;return!!e})});return{__sfc:!0,props:e,hasChangelog:n,createChangelogFromRelease:t=>{var e,n,a,i;return null!==(e=null!==(n=null===(a=t.translations)||void 0===a||null===(a=a[(0,o.Z0)()])||void 0===a?void 0:a.changelog)&&void 0!==n?n:null===(i=t.translations)||void 0===i||null===(i=i.en)||void 0===i?void 0:i.changelog)&&void 0!==e?e:""},mdiClockFast:c.NWU,t:o.Tl,NcAppSidebarTab:u.A,NcIconSvgWrapper:l.A,Markdown:E}}});var ot=a(54891),st={};st.styleTagTransform=N(),st.setAttributes=x(),st.insert=y().bind(null,"head"),st.domAPI=C(),st.insertStyleElement=S(),h()(ot.A,st),ot.A&&ot.A.locals&&ot.A.locals;const pt=(0,T.A)(it,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return n.hasChangelog?e(n.NcAppSidebarTab,{attrs:{id:"changelog",name:n.t("settings","Changelog"),order:2},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:n.mdiClockFast,size:24}})]},proxy:!0}],null,!1,1849836872)},[t._v(" "),t._l(t.app.releases,function(a){return e("div",{key:a.version,staticClass:"app-sidebar-tabs__release"},[e("h2",[t._v(t._s(a.version))]),t._v(" "),e(n.Markdown,{staticClass:"app-sidebar-tabs__release-text",attrs:{text:n.createChangelogFromRelease(a)}})],1)})],2):t._e()},[],!1,null,"1114c30b",null).exports,rt=(0,i.pM)({__name:"AppDeployDaemonTab",props:{app:null},setup(t){var e;const n=t;return{__sfc:!0,props:n,gpuSupport:(0,i.KR)("cpu"!==(null===(e=n.app)||void 0===e||null===(e=e.daemon)||void 0===e||null===(e=e.deploy_config)||void 0===e||null===(e=e.computeDevice)||void 0===e?void 0:e.id)||!1),NcAppSidebarTab:u.A,NcIconSvgWrapper:l.A,mdiFileChart:c.pTY}}});var lt=a(98656),dt={};dt.styleTagTransform=N(),dt.setAttributes=x(),dt.insert=y().bind(null,"head"),dt.domAPI=C(),dt.insertStyleElement=S(),h()(lt.A,dt),lt.A&&lt.A.locals&&lt.A.locals;const ct=(0,T.A)(rt,function(){var t,e,n,a,i,o=this,s=o._self._c,p=o._self._setupProxy;return null!==(t=o.app)&&void 0!==t&&t.daemon?s(p.NcAppSidebarTab,{attrs:{id:"daemon",name:o.t("settings","Daemon"),order:3},scopedSlots:o._u([{key:"icon",fn:function(){return[s(p.NcIconSvgWrapper,{attrs:{path:p.mdiFileChart,size:24}})]},proxy:!0}],null,!1,1746493066)},[o._v(" "),s("div",{staticClass:"daemon"},[s("h4",[o._v(o._s(o.t("settings","Deploy Daemon")))]),o._v(" "),s("p",[s("b",[o._v(o._s(o.t("settings","Type")))]),o._v(": "+o._s(null===(e=o.app)||void 0===e?void 0:e.daemon.accepts_deploy_id))]),o._v(" "),s("p",[s("b",[o._v(o._s(o.t("settings","Name")))]),o._v(": "+o._s(null===(n=o.app)||void 0===n?void 0:n.daemon.name))]),o._v(" "),s("p",[s("b",[o._v(o._s(o.t("settings","Display Name")))]),o._v(": "+o._s(null===(a=o.app)||void 0===a?void 0:a.daemon.display_name))]),o._v(" "),s("p",[s("b",[o._v(o._s(o.t("settings","GPUs support")))]),o._v(": "+o._s(p.gpuSupport))]),o._v(" "),s("p",[s("b",[o._v(o._s(o.t("settings","Compute device")))]),o._v(": "+o._s(null===(i=o.app)||void 0===i||null===(i=i.daemon)||void 0===i||null===(i=i.deploy_config)||void 0===i||null===(i=i.computeDevice)||void 0===i?void 0:i.label))])])]):o._e()},[],!1,null,"e726cadc",null).exports;var ut=a(81757);const At=(0,i.pM)({__name:"AppDaemonBadge",props:{daemon:null},setup:t=>({__sfc:!0,mdiFileChart:c.pTY,NcIconSvgWrapper:l.A})});var gt=a(57487),mt={};mt.styleTagTransform=N(),mt.setAttributes=x(),mt.insert=y().bind(null,"head"),mt.domAPI=C(),mt.insertStyleElement=S(),h()(gt.A,mt),gt.A&&gt.A.locals&&gt.A.locals;const vt=(0,T.A)(At,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return t.daemon?e("span",{staticClass:"app-daemon-badge",attrs:{title:t.daemon.name}},[e(n.NcIconSvgWrapper,{attrs:{path:n.mdiFileChart,size:20,inline:""}}),t._v("\n\t"+t._s(t.daemon.display_name)+"\n")],1):t._e()},[],!1,null,"0698b3b8",null).exports;var ht=a(86438),bt=a(36620),Ct=a(14744);const ft=(0,i.pM)({__name:"AppStoreSidebar",setup(t){const e=(0,s.lq)(),n=(0,s.rd)(),a=(0,p.T)(),u=(0,H.a)(),A=(0,Ct.P)(),g=(0,i.EW)(()=>{var t;return null!==(t=e.params.id)&&void 0!==t?t:""}),m=(0,i.EW)(()=>{if(A.getters.isAppApiEnabled){var t;const e=null!==(t=u.getAllApps.find(t=>t.id===g.value))&&void 0!==t?t:null;if(e)return e}return a.getAppById(g.value)}),v=(0,i.EW)(()=>{var t;return(null===(t=m.value.appstoreData)||void 0===t?void 0:t.ratingNumOverall)>5}),h=(0,i.EW)(()=>{var t,e,n;return(null===(t=m.value.appstoreData)||void 0===t?void 0:t.ratingNumRecent)>5?m.value.appstoreData.ratingRecent:null!==(e=null===(n=m.value.appstoreData)||void 0===n?void 0:n.ratingOverall)&&void 0!==e?e:.5}),b=(0,i.EW)(()=>null!==m.value),{appIcon:C}=function(t){const e=(0,i.KR)(null),n=(0,i.EW)(()=>{var e;let n;var a,i,o,s;return n=null!==(e=t.value)&&void 0!==e&&e.app_api?c.ED:null!==(a=[null!==(i=null===(o=t.value)||void 0===o?void 0:o.category)&&void 0!==i?i:[]].flat().map(t=>ht.A[t]).filter(t=>!!t).at(0))&&void 0!==a?a:null!==(s=t.value)&&void 0!==s&&s.app_api?c.ED:c.CZ3,n?'<svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path d="'.concat(n,'" /></svg>'):null});return(0,i.nT)(async()=>{var a;if(null!==(a=t.value)&&void 0!==a&&a.preview){e.value=null;try{const n=await window.fetch(t.value.preview),a=await n.blob(),i=await a.text();e.value=i.replaceAll(/fill="#(fff|ffffff)([a-z0-9]{1,2})?"/gi,'fill="currentColor"')}catch(t){e.value=n.value,bt.A.error("Could not load app icon",{error:t})}}else e.value=n.value}),{appIcon:e}}(m),f=(0,i.EW)(()=>m.value?""!==m.value.license?(0,o.Tl)("settings","Version {version}, {license}-licensed",{version:m.value.version,license:m.value.licence.toString().toUpperCase()}):(0,o.Tl)("settings","Version {version}",{version:m.value.version}):""),y=(0,i.KR)("details");(0,i.wB)([m],()=>{y.value="details"});const _=(0,i.KR)(!1),x=(0,i.EW)(()=>{var t;return(null===(t=m.value)||void 0===t?void 0:t.screenshot)&&_.value}),w=()=>{var t,e;if(null!==(t=m.value)&&void 0!==t&&t.releases&&null!==(e=m.value)&&void 0!==e&&e.screenshot){const t=new Image;t.onload=()=>{_.value=!0},t.src=m.value.screenshot}};return(0,i.wB)([m],w),(0,i.sV)(w),{__sfc:!0,route:e,router:n,store:a,appApiStore:u,legacyStore:A,appId:g,app:m,hasRating:v,rating:h,showSidebar:b,appIcon:C,licenseText:f,activeTab:y,hideAppDetails:()=>{n.push({name:"apps-category",params:{category:e.params.category}})},screenshotLoaded:_,hasScreenshot:x,loadScreenshot:w,NcAppSidebar:r.N,NcIconSvgWrapper:l.A,AppScore:d.A,AppDescriptionTab:M,AppDetailsTab:at,AppReleasesTab:pt,AppDeployDaemonTab:ct,AppLevelBadge:ut.A,AppDaemonBadge:vt}}});var yt=a(69423),_t={};_t.styleTagTransform=N(),_t.setAttributes=x(),_t.insert=y().bind(null,"head"),_t.domAPI=C(),_t.insertStyleElement=S(),h()(yt.A,_t),yt.A&&yt.A.locals&&yt.A.locals;const xt=(0,T.A)(ft,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return n.showSidebar?e(n.NcAppSidebar,{staticClass:"app-sidebar",class:{"app-sidebar--with-screenshot":n.hasScreenshot},attrs:{active:n.activeTab,background:n.hasScreenshot?n.app.screenshot:void 0,compact:!n.hasScreenshot,name:n.app.name,title:n.app.name,subname:n.licenseText,subtitle:n.licenseText},on:{"update:active":function(t){n.activeTab=t},close:n.hideAppDetails},scopedSlots:t._u([n.hasScreenshot?null:{key:"header",fn:function(){var t;return[e(n.NcIconSvgWrapper,{staticClass:"app-sidebar__fallback-icon",attrs:{svg:null!==(t=n.appIcon)&&void 0!==t?t:"",size:64}})]},proxy:!0},{key:"description",fn:function(){return[e("div",{staticClass:"app-sidebar__badges"},[e(n.AppLevelBadge,{attrs:{level:n.app.level}}),t._v(" "),n.app.app_api&&n.app.daemon?e(n.AppDaemonBadge,{attrs:{daemon:n.app.daemon}}):t._e(),t._v(" "),n.hasRating?e(n.AppScore,{attrs:{score:n.rating}}):t._e()],1)]},proxy:!0}],null,!0)},[t._v(" "),t._v(" "),e(n.AppDescriptionTab,{attrs:{app:n.app}}),t._v(" "),e(n.AppDetailsTab,{attrs:{app:n.app}}),t._v(" "),e(n.AppReleasesTab,{attrs:{app:n.app}}),t._v(" "),e(n.AppDeployDaemonTab,{attrs:{app:n.app}})],1):t._e()},[],!1,null,"ffae2952",null).exports},54891:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,".app-sidebar-tabs__release h2[data-v-1114c30b]{border-bottom:1px solid var(--color-border);font-size:24px}.app-sidebar-tabs__release-text[data-v-1114c30b] h3{font-size:20px}.app-sidebar-tabs__release-text[data-v-1114c30b] h4{font-size:17px}","",{version:3,sources:["webpack://./apps/settings/src/components/AppStoreSidebar/AppReleasesTab.vue"],names:[],mappings:"AAEC,+CACC,2CAAA,CACA,cAAA,CAKA,oDACC,cAAA,CAED,oDACC,cAAA",sourcesContent:["\n.app-sidebar-tabs__release {\n\th2 {\n\t\tborder-bottom: 1px solid var(--color-border);\n\t\tfont-size: 24px;\n\t}\n\n\t&-text {\n\t\t// Overwrite changelog heading styles\n\t\t:deep(h3) {\n\t\t\tfont-size: 20px;\n\t\t}\n\t\t:deep(h4) {\n\t\t\tfont-size: 17px;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const p=s},56644:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,"\n.empty-content__loading[data-v-cd4ac3b0] {\n\theight: 100%;\n}\n.app-settings-content__label[data-v-cd4ac3b0] {\n\tmargin-block-start: var(--app-navigation-padding);\n\tmargin-inline-start: calc(var(--default-clickable-area) + var(--app-navigation-padding) * 2);\n\tmin-height: var(--default-clickable-area);\n\tline-height: var(--default-clickable-area);\n\tvertical-align: center;\n}\n","",{version:3,sources:["webpack://./apps/settings/src/views/AppStore.vue"],names:[],mappings:";AA2EA;CACA,YAAA;AACA;AAEA;CACA,iDAAA;CACA,4FAAA;CACA,yCAAA;CACA,0CAAA;CACA,sBAAA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n\n<template>\n\t\x3c!-- Apps list --\x3e\n\t<NcAppContent class=\"app-settings-content\"\n\t\t:page-heading=\"pageHeading\"\n\t\t:page-title=\"pageTitle\">\n\t\t<h2 class=\"app-settings-content__label\" v-text=\"viewLabel\" />\n\n\t\t<AppStoreDiscoverSection v-if=\"currentCategory === 'discover'\" />\n\t\t<NcEmptyContent v-else-if=\"isLoading\"\n\t\t\tclass=\"empty-content__loading\"\n\t\t\t:name=\"t('settings', 'Loading app list')\">\n\t\t\t<template #icon>\n\t\t\t\t<NcLoadingIcon :size=\"64\" />\n\t\t\t</template>\n\t\t</NcEmptyContent>\n\t\t<AppList v-else :category=\"currentCategory\" />\n\t</NcAppContent>\n</template>\n\n<script setup lang=\"ts\">\nimport { translate as t } from '@nextcloud/l10n'\nimport { computed, getCurrentInstance, onBeforeMount, onBeforeUnmount } from 'vue'\nimport { useRoute } from 'vue-router/composables'\n\nimport { useAppsStore } from '../store/apps-store'\nimport { APPS_SECTION_ENUM } from '../constants/AppsConstants'\n\nimport NcAppContent from '@nextcloud/vue/components/NcAppContent'\nimport NcEmptyContent from '@nextcloud/vue/components/NcEmptyContent'\nimport NcLoadingIcon from '@nextcloud/vue/components/NcLoadingIcon'\nimport AppList from '../components/AppList.vue'\nimport AppStoreDiscoverSection from '../components/AppStoreDiscover/AppStoreDiscoverSection.vue'\nimport { useAppApiStore } from '../store/app-api-store.ts'\n\nconst route = useRoute()\nconst store = useAppsStore()\nconst appApiStore = useAppApiStore()\n\n/**\n * ID of the current active category, default is `discover`\n */\nconst currentCategory = computed(() => route.params?.category ?? 'discover')\n\nconst viewLabel = computed<string>(() => APPS_SECTION_ENUM[currentCategory.value] ?? store.getCategoryById(currentCategory.value)?.displayName)\n\nconst pageHeading = t('settings', 'App Store')\nconst pageTitle = computed(() => `${viewLabel.value} - ${pageHeading}`) // NcAppContent automatically appends the instance name\n\n// TODO this part should be migrated to pinia\nconst instance = getCurrentInstance()\n/** Is the app list loading */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst isLoading = computed(() => (instance?.proxy as any).$store.getters.loading('list'))\nonBeforeMount(() => {\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t(instance?.proxy as any).$store.dispatch('getCategories', { shouldRefetchCategories: true });\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\t(instance?.proxy as any).$store.dispatch('getAllApps')\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\n\tif ((instance?.proxy as any).$store.getters.isAppApiEnabled) {\n\t\tappApiStore.fetchAllApps()\n\t\tappApiStore.updateAppsStatus()\n\t}\n})\nonBeforeUnmount(() => {\n\tclearInterval(appApiStore.getStatusUpdater)\n})\n<\/script>\n\n<style scoped>\n.empty-content__loading {\n\theight: 100%;\n}\n\n.app-settings-content__label {\n\tmargin-block-start: var(--app-navigation-padding);\n\tmargin-inline-start: calc(var(--default-clickable-area) + var(--app-navigation-padding) * 2);\n\tmin-height: var(--default-clickable-area);\n\tline-height: var(--default-clickable-area);\n\tvertical-align: center;\n}\n</style>\n"],sourceRoot:""}]);const p=s},57487:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,".app-daemon-badge[data-v-0698b3b8]{color:var(--color-text-maxcontrast);background-color:rgba(0,0,0,0);border:1px solid var(--color-text-maxcontrast);border-radius:var(--border-radius);display:flex;flex-direction:row;gap:6px;padding:3px 6px;width:fit-content}","",{version:3,sources:["webpack://./apps/settings/src/components/AppList/AppDaemonBadge.vue"],names:[],mappings:"AACA,mCACC,mCAAA,CACA,8BAAA,CACA,8CAAA,CACA,kCAAA,CAEA,YAAA,CACA,kBAAA,CACA,OAAA,CACA,eAAA,CACA,iBAAA",sourcesContent:["\n.app-daemon-badge {\n\tcolor: var(--color-text-maxcontrast);\n\tbackground-color: transparent;\n\tborder: 1px solid var(--color-text-maxcontrast);\n\tborder-radius: var(--border-radius);\n\n\tdisplay: flex;\n\tflex-direction: row;\n\tgap: 6px;\n\tpadding: 3px 6px;\n\twidth: fit-content;\n}\n"],sourceRoot:""}]);const p=s},58924:(t,e,n)=>{n.d(e,{A:()=>T});var a=n(846),i=n(99148),o=n(81757),s=n(23453);const p={name:"SvgFilterMixin",data:()=>({filterId:""}),computed:{filterUrl(){return"url(#".concat(this.filterId,")")}},mounted(){this.filterId="invertIconApps-"+Math.random().toString(36).substring(2)}};var r=n(14486);const l=(0,r.A)(p,void 0,void 0,!1,null,null,null).exports;var d=n(21376),c=n(6695),u=n(9165),A=n(62938),g=n(99002);const m={name:"AppItem",components:{AppLevelBadge:o.A,AppScore:i.A,NcButton:d.A,NcIconSvgWrapper:c.A,DaemonSelectionDialog:g.A},mixins:[s.A,l],props:{app:{type:Object,required:!0},category:{type:String,required:!0},listView:{type:Boolean,default:!0},useBundleView:{type:Boolean,default:!1},headers:{type:String,default:null},inline:{type:Boolean,default:!1}},setup:()=>({store:(0,a.T)(),appApiStore:(0,A.a)(),mdiCogOutline:u.ED}),data:()=>({isSelected:!1,scrolled:!1,screenshotLoaded:!1,showSelectDaemonModal:!1}),computed:{hasRating(){return this.app.appstoreData&&this.app.appstoreData.ratingNumOverall>5},dataItemTag(){return this.listView?"td":"div"},withSidebar(){return!!this.$route.params.id},shouldDisplayDefaultIcon(){return this.listView&&!this.app.preview||!this.listView&&!this.screenshotLoaded}},watch:{"$route.params.id"(t){this.isSelected=this.app.id===t}},mounted(){if(this.isSelected=this.app.id===this.$route.params.id,this.app.releases&&this.app.screenshot){const t=new Image;t.onload=()=>{this.screenshotLoaded=!0},t.src=this.app.screenshot}},watchers:{},methods:{prefix:(t,e)=>t+"_"+e,getDataItemHeaders(t){return this.useBundleView?[this.headers,t].join(" "):null},showSelectionModal(){this.showSelectDaemonModal=!0},async enableButtonAction(){var t;null!==(t=this.app)&&void 0!==t&&t.app_api?(await this.appApiStore.fetchDockerDaemons(),1===this.appApiStore.dockerDaemons.length&&this.app.needsDownload?this.enable(this.app.id,this.appApiStore.dockerDaemons[0]):this.app.needsDownload?this.showSelectionModal():this.enable(this.app.id,this.app.daemon)):this.enable(this.app.id)}}};var v=n(85072),h=n.n(v),b=n(97825),C=n.n(b),f=n(77659),y=n.n(f),_=n(55056),x=n.n(_),w=n(10540),S=n.n(w),k=n(41113),N=n.n(k),D=n(64342),I={};I.styleTagTransform=N(),I.setAttributes=x(),I.insert=y().bind(null,"head"),I.domAPI=C(),I.insertStyleElement=S(),h()(D.A,I),D.A&&D.A.locals&&D.A.locals;const T=(0,r.A)(m,function(){var t,e,n=this,a=n._self._c;return a(n.listView?"tr":n.inline?"article":"li",{tag:"component",staticClass:"app-item",class:{"app-item--list-view":n.listView,"app-item--store-view":!n.listView,"app-item--selected":n.isSelected,"app-item--with-sidebar":n.withSidebar}},[a(n.dataItemTag,{tag:"component",staticClass:"app-image app-image-icon",attrs:{headers:n.getDataItemHeaders("app-table-col-icon")}},[null!==(t=n.app)&&void 0!==t&&t.app_api||!n.shouldDisplayDefaultIcon?n.app.app_api&&n.shouldDisplayDefaultIcon?a("NcIconSvgWrapper",{staticStyle:{"min-width":"auto","min-height":"auto",height:"100%"},attrs:{path:n.mdiCogOutline,size:n.listView?24:48}}):n.listView&&n.app.preview&&!n.app.app_api?a("svg",{attrs:{width:"32",height:"32",viewBox:"0 0 32 32"}},[a("image",{staticClass:"app-icon",attrs:{x:"0",y:"0",width:"32",height:"32",preserveAspectRatio:"xMinYMin meet","xlink:href":n.app.preview}})]):n._e():a("div",{staticClass:"icon-settings-dark"}),n._v(" "),!n.listView&&n.app.screenshot&&n.screenshotLoaded?a("img",{attrs:{src:n.app.screenshot,alt:""}}):n._e()],1),n._v(" "),a(n.dataItemTag,{tag:"component",staticClass:"app-name",attrs:{headers:n.getDataItemHeaders("app-table-col-name")}},[a("router-link",{staticClass:"app-name--link",attrs:{to:{name:"apps-details",params:{category:n.category,id:n.app.id}},"aria-label":n.t("settings","Show details for {appName} app",{appName:n.app.name})}},[n._v("\n\t\t\t"+n._s(n.app.name)+"\n\t\t")])],1),n._v(" "),n.listView?n._e():a(n.dataItemTag,{tag:"component",staticClass:"app-summary",attrs:{headers:n.getDataItemHeaders("app-version")}},[n._v("\n\t\t"+n._s(n.app.summary)+"\n\t")]),n._v(" "),n.listView?a(n.dataItemTag,{tag:"component",staticClass:"app-version",attrs:{headers:n.getDataItemHeaders("app-table-col-version")}},[n.app.version?a("span",[n._v(n._s(n.app.version))]):n.app.appstoreData.releases[0].version?a("span",[n._v(n._s(n.app.appstoreData.releases[0].version))]):n._e()]):n._e(),n._v(" "),a(n.dataItemTag,{tag:"component",staticClass:"app-level",attrs:{headers:n.getDataItemHeaders("app-table-col-level")}},[a("AppLevelBadge",{attrs:{level:n.app.level}}),n._v(" "),n.hasRating&&!n.listView?a("AppScore",{attrs:{score:n.app.score}}):n._e()],1),n._v(" "),n.inline?n._e():a(n.dataItemTag,{tag:"component",staticClass:"app-actions",attrs:{headers:n.getDataItemHeaders("app-table-col-actions")}},[n.app.error?a("div",{staticClass:"warning"},[n._v("\n\t\t\t"+n._s(n.app.error)+"\n\t\t")]):n._e(),n._v(" "),n.isLoading||n.isInitializing?a("div",{staticClass:"icon icon-loading-small"}):n._e(),n._v(" "),n.app.update?a("NcButton",{attrs:{type:"primary",disabled:n.installing||n.isLoading||!n.defaultDeployDaemonAccessible||n.isManualInstall,title:n.updateButtonText},on:{click:function(t){return t.stopPropagation(),n.update(n.app.id)}}},[n._v("\n\t\t\t"+n._s(n.t("settings","Update to {update}",{update:n.app.update}))+"\n\t\t")]):n._e(),n._v(" "),n.app.canUnInstall?a("NcButton",{staticClass:"uninstall",attrs:{type:"tertiary",disabled:n.installing||n.isLoading},on:{click:function(t){return t.stopPropagation(),n.remove(n.app.id)}}},[n._v("\n\t\t\t"+n._s(n.t("settings","Remove"))+"\n\t\t")]):n._e(),n._v(" "),n.app.active?a("NcButton",{attrs:{disabled:n.installing||n.isLoading||n.isInitializing||n.isDeploying},on:{click:function(t){return t.stopPropagation(),n.disable(n.app.id)}}},[n._v("\n\t\t\t"+n._s(n.disableButtonText)+"\n\t\t")]):n._e(),n._v(" "),n.app.active||!n.app.canInstall&&!n.app.isCompatible?n.app.active?n._e():a("NcButton",{attrs:{title:n.forceEnableButtonTooltip,"aria-label":n.forceEnableButtonTooltip,type:"secondary",disabled:n.installing||n.isLoading||!n.defaultDeployDaemonAccessible},on:{click:function(t){return t.stopPropagation(),n.forceEnable(n.app.id)}}},[n._v("\n\t\t\t"+n._s(n.forceEnableButtonText)+"\n\t\t")]):a("NcButton",{attrs:{title:n.enableButtonTooltip,"aria-label":n.enableButtonTooltip,type:"primary",disabled:!n.app.canInstall||n.installing||n.isLoading||!n.defaultDeployDaemonAccessible||n.isInitializing||n.isDeploying},on:{click:function(t){return t.stopPropagation(),n.enableButtonAction.apply(null,arguments)}}},[n._v("\n\t\t\t"+n._s(n.enableButtonText)+"\n\t\t")]),n._v(" "),null!==(e=n.app)&&void 0!==e&&e.app_api&&n.showSelectDaemonModal?a("DaemonSelectionDialog",{attrs:{show:n.showSelectDaemonModal,app:n.app},on:{"update:show":function(t){n.showSelectDaemonModal=t}}}):n._e()],1)],1)},[],!1,null,"2e0b174b",null).exports},62938:(t,e,n)=>{n.d(e,{a:()=>A});var a=n(19051),i=n(56760),o=n(85168),s=n(81222),p=n(53334),r=n(63814),l=n(65899),d=n(6028),c=n(36620),u=n(85471);const A=(0,l.nY)("app-api-apps",{state:()=>({apps:[],updateCount:(0,s.C)("settings","appstoreExAppUpdateCount",0),loading:{},loadingList:!1,statusUpdater:null,daemonAccessible:(0,s.C)("settings","defaultDaemonConfigAccessible",!1),defaultDaemon:(0,s.C)("settings","defaultDaemonConfig",null),dockerDaemons:[]}),getters:{getLoading:t=>e=>{var n;return null!==(n=t.loading[e])&&void 0!==n&&n},getAllApps:t=>t.apps,getUpdateCount:t=>t.updateCount,getDaemonAccessible:t=>t.daemonAccessible,getDefaultDaemon:t=>t.defaultDaemon,getAppStatus:t=>e=>{var n;return(null===(n=t.apps.find(t=>t.id===e))||void 0===n?void 0:n.status)||null},getStatusUpdater:t=>t.statusUpdater,getInitializingOrDeployingApps:t=>t.apps.filter(t=>{var e,n;return(null==t||null===(e=t.status)||void 0===e?void 0:e.action)&&("deploy"===(null==t||null===(n=t.status)||void 0===n?void 0:n.action)||"init"===t.status.action||"healthcheck"===t.status.action)&&""!==t.status.type})},actions:{appsApiFailure(t){(0,o.Qg)((0,p.Tl)("settings","An error occurred during the request. Unable to proceed.")+"<br>"+t.error.response.data.data.message,{isHTML:!0}),c.A.error(t)},setLoading(t,e){u.Ay.set(this.loading,t,e)},setError(t,e){(Array.isArray(t)?t:[t]).forEach(t=>{const n=this.apps.find(e=>e.id===t);n&&(n.error=e)})},enableApp(t,e,n){return this.setLoading(t,!0),this.setLoading("install",!0),(0,i.C5)().then(()=>a.Ay.post((0,r.Jv)("/apps/app_api/apps/enable/".concat(t,"/").concat(e.name)),{deployOptions:n}).then(n=>{this.setLoading(t,!1),this.setLoading("install",!1);const i=this.apps.find(e=>e.id===t);return i&&(i.installed||(i.installed=!0,i.needsDownload=!1,i.daemon=e,i.status={type:"install",action:"deploy",init:0,deploy:0}),i.active=!0,i.canUnInstall=!1,i.removable=!0,i.error=""),this.updateAppsStatus(),a.Ay.get((0,r.Jv)("apps/files")).then(()=>{n.data.update_required&&((0,o.cf)((0,p.Tl)("settings","The app has been enabled but needs to be updated."),{onClick:()=>window.location.reload(),close:!1}),setTimeout(()=>{location.reload()},5e3))}).catch(()=>{this.setError(t,(0,p.Tl)("settings","Error: This app cannot be enabled because it makes the server unstable"))})}).catch(e=>{this.setLoading(t,!1),this.setLoading("install",!1),this.setError(t,e.response.data.data.message),this.appsApiFailure({appId:t,error:e})})).catch(()=>{this.setLoading(t,!1),this.setLoading("install",!1)})},forceEnableApp(t){return this.setLoading(t,!0),this.setLoading("install",!0),(0,i.C5)().then(()=>d.A.post((0,r.Jv)("/apps/app_api/apps/force"),{appId:t}).then(()=>{location.reload()}).catch(e=>{this.setLoading(t,!1),this.setLoading("install",!1),this.setError(t,e.response.data.data.message),this.appsApiFailure({appId:t,error:e})})).catch(()=>{this.setLoading(t,!1),this.setLoading("install",!1)})},disableApp(t){return this.setLoading(t,!0),(0,i.C5)().then(()=>d.A.get((0,r.Jv)("apps/app_api/apps/disable/".concat(t))).then(()=>{this.setLoading(t,!1);const e=this.apps.find(e=>e.id===t);return e&&(e.active=!1,e.removable&&(e.canUnInstall=!0)),!0}).catch(e=>{this.setLoading(t,!1),this.appsApiFailure({appId:t,error:e})})).catch(()=>{this.setLoading(t,!1)})},uninstallApp(t,e){return this.setLoading(t,!0),(0,i.C5)().then(()=>d.A.get((0,r.Jv)("/apps/app_api/apps/uninstall/".concat(t,"?removeData=").concat(e))).then(()=>{this.setLoading(t,!1);const e=this.apps.find(e=>e.id===t);return e&&(e.active=!1,e.needsDownload=!0,e.installed=!1,e.canUnInstall=!1,e.canInstall=!0,e.daemon=null,e.status={},null!==e.update&&this.updateCount--,e.update=void 0),!0}).catch(e=>{this.setLoading(t,!1),this.appsApiFailure({appId:t,error:e})}))},updateApp(t){return this.setLoading(t,!0),this.setLoading("install",!0),(0,i.C5)().then(()=>d.A.get((0,r.Jv)("/apps/app_api/apps/update/".concat(t))).then(()=>{this.setLoading(t,!1),this.setLoading("install",!1);const e=this.apps.find(e=>e.id===t);if(e){const t=e.update;e.update=void 0,e.version=t||e.version,e.status={type:"update",action:"deploy",init:0,deploy:0},e.error=""}return this.updateCount--,this.updateAppsStatus(),!0}).catch(e=>{this.setLoading(t,!1),this.setLoading("install",!1),this.appsApiFailure({appId:t,error:e})})).catch(()=>{this.setLoading(t,!1),this.setLoading("install",!1)})},async fetchAllApps(){this.loadingList=!0;try{const t=await d.A.get((0,r.Jv)("/apps/app_api/apps/list"));return this.apps=t.data.apps,this.loadingList=!1,!0}catch(t){c.A.error(t),(0,o.Qg)((0,p.Tl)("settings","An error occurred during the request. Unable to proceed.")),this.loadingList=!1}},async fetchAppStatus(t){return d.A.get((0,r.Jv)("/apps/app_api/apps/status/".concat(t))).then(e=>{const n=this.apps.find(e=>e.id===t);n&&(n.status=e.data);const a=this.getInitializingOrDeployingApps;console.debug("initializingOrDeployingApps after setAppStatus",a),0===a.length&&(console.debug("clearing interval"),clearInterval(this.statusUpdater),this.statusUpdater=null),Object.hasOwn(e.data,"error")&&""!==e.data.error&&1===a.length&&(clearInterval(this.statusUpdater),this.statusUpdater=null)}).catch(e=>{this.appsApiFailure({appId:t,error:e}),this.apps=this.apps.filter(e=>e.id!==t),this.updateAppsStatus()})},async fetchDockerDaemons(){try{const{data:t}=await a.Ay.get((0,r.Jv)("/apps/app_api/daemons"));this.defaultDaemon=t.daemons.find(e=>e.name===t.default_daemon_config),this.dockerDaemons=t.daemons.filter(t=>"docker-install"===t.accepts_deploy_id)}catch(t){return c.A.error("[app-api-store] Failed to fetch Docker daemons",{error:t}),!1}return!0},updateAppsStatus(){clearInterval(this.statusUpdater),0!==this.getInitializingOrDeployingApps.length&&(this.statusUpdater=setInterval(()=>{const t=this.getInitializingOrDeployingApps;console.debug("initializingOrDeployingApps",t),t.forEach(t=>{this.fetchAppStatus(t.id)})},2e3))}}})},64342:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,'/*!\n * SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */.app-item[data-v-2e0b174b]{position:relative}.app-item[data-v-2e0b174b]:hover{background-color:var(--color-background-dark)}.app-item--list-view[data-v-2e0b174b]{--app-item-padding: calc(var(--default-grid-baseline) * 2);--app-item-height: calc(var(--default-clickable-area) + var(--app-item-padding) * 2)}.app-item--list-view.app-item--selected[data-v-2e0b174b]{background-color:var(--color-background-dark)}.app-item--list-view>*[data-v-2e0b174b]{vertical-align:middle;border-bottom:1px solid var(--color-border);padding:var(--app-item-padding);height:var(--app-item-height)}.app-item--list-view .app-image[data-v-2e0b174b]{width:var(--default-clickable-area);height:auto;text-align:end}.app-item--list-view .app-image-icon svg[data-v-2e0b174b],.app-item--list-view .app-image-icon .icon-settings-dark[data-v-2e0b174b]{margin-top:5px;width:20px;height:20px;opacity:.5;background-size:cover;display:inline-block}.app-item--list-view .app-name[data-v-2e0b174b]{padding:0 var(--app-item-padding)}.app-item--list-view .app-name--link[data-v-2e0b174b]{height:var(--app-item-height);display:flex;align-items:center}.app-item--list-view .app-name--link[data-v-2e0b174b]::after{content:"";position:absolute;inset-inline:0;height:var(--app-item-height)}.app-item--list-view .app-actions[data-v-2e0b174b]{display:flex;gap:var(--app-item-padding);flex-wrap:wrap;justify-content:end}.app-item--list-view .app-actions .icon-loading-small[data-v-2e0b174b]{display:inline-block;top:4px;margin-inline-end:10px}@media only screen and (max-width: 900px){.app-item--list-view .app-version[data-v-2e0b174b],.app-item--list-view .app-level[data-v-2e0b174b]{display:none}}@media only screen and (max-width: 512px){.app-item--list-view .app-actions[data-v-2e0b174b]{display:none}}.app-item--store-view[data-v-2e0b174b]{padding:30px}.app-item--store-view .app-image-icon .icon-settings-dark[data-v-2e0b174b]{width:100%;height:150px;background-size:45px;opacity:.5}.app-item--store-view .app-image-icon svg[data-v-2e0b174b]{position:absolute;bottom:43px;width:64px;height:64px;opacity:.1}.app-item--store-view .app-name[data-v-2e0b174b]{margin:5px 0}.app-item--store-view .app-name--link[data-v-2e0b174b]::after{content:"";position:absolute;inset-block:0;inset-inline:0}.app-item--store-view .app-actions[data-v-2e0b174b]{margin:10px 0}@media only screen and (min-width: 1601px){.app-item--store-view[data-v-2e0b174b]{width:25%}.app-item--store-view.app-item--with-sidebar[data-v-2e0b174b]{width:33%}}@media only screen and (max-width: 1600px){.app-item--store-view[data-v-2e0b174b]{width:25%}.app-item--store-view.app-item--with-sidebar[data-v-2e0b174b]{width:33%}}@media only screen and (max-width: 1400px){.app-item--store-view[data-v-2e0b174b]{width:33%}.app-item--store-view.app-item--with-sidebar[data-v-2e0b174b]{width:50%}}@media only screen and (max-width: 900px){.app-item--store-view[data-v-2e0b174b]{width:50%}.app-item--store-view.app-item--with-sidebar[data-v-2e0b174b]{width:100%}}@media only screen and (max-width: 1024px){.app-item--store-view[data-v-2e0b174b]{width:50%}}@media only screen and (max-width: 480px){.app-item--store-view[data-v-2e0b174b]{width:100%}}.app-icon[data-v-2e0b174b]{filter:var(--background-invert-if-bright)}.app-image[data-v-2e0b174b]{position:relative;height:150px;opacity:1;overflow:hidden}.app-image img[data-v-2e0b174b]{width:100%}.app-version[data-v-2e0b174b]{color:var(--color-text-maxcontrast)}',"",{version:3,sources:["webpack://./core/css/variables.scss","webpack://./apps/settings/src/components/AppList/AppItem.vue"],names:[],mappings:"AAEA;;;EAAA,CCEA,2BACC,iBAAA,CAEA,iCACC,6CAAA,CAGD,sCACC,0DAAA,CACA,oFAAA,CAEA,yDACC,6CAAA,CAGD,wCACC,qBAAA,CACA,2CAAA,CACA,+BAAA,CACA,6BAAA,CAGD,iDACC,mCAAA,CACA,WAAA,CACA,cAAA,CAGD,oIAEC,cAAA,CACA,UAAA,CACA,WAAA,CACA,UAAA,CACA,qBAAA,CACA,oBAAA,CAGD,gDACC,iCAAA,CAGD,sDACC,6BAAA,CACA,YAAA,CACA,kBAAA,CAMD,6DACC,UAAA,CACA,iBAAA,CACA,cAAA,CACA,6BAAA,CAGD,mDACC,YAAA,CACA,2BAAA,CACA,cAAA,CACA,mBAAA,CAEA,uEACC,oBAAA,CACA,OAAA,CACA,sBAAA,CAKF,0CACC,oGAEC,YAAA,CAAA,CAKF,0CACC,mDACC,YAAA,CAAA,CAKH,uCACC,YAAA,CAEA,2EACC,UAAA,CACA,YAAA,CACA,oBAAA,CACA,UAAA,CAGD,2DACC,iBAAA,CACA,WAAA,CAEA,UAAA,CACA,WAAA,CACA,UAAA,CAGD,iDACC,YAAA,CAGD,8DACC,UAAA,CACA,iBAAA,CACA,aAAA,CACA,cAAA,CAGD,oDACC,aAAA,CAGD,2CAlCD,uCAmCE,SAAA,CAEA,8DACC,SAAA,CAAA,CAIF,2CA1CD,uCA2CE,SAAA,CAEA,8DACC,SAAA,CAAA,CAIF,2CAlDD,uCAmDE,SAAA,CAEA,8DACC,SAAA,CAAA,CAIF,0CA1DD,uCA2DE,SAAA,CAEA,8DACC,UAAA,CAAA,CAIF,2CAlED,uCAmEE,SAAA,CAAA,CAGD,0CAtED,uCAuEE,UAAA,CAAA,CAKH,2BACC,yCAAA,CAGD,4BACC,iBAAA,CACA,YAAA,CACA,SAAA,CACA,eAAA,CAEA,gCACC,UAAA,CAIF,8BACC,mCAAA",sourcesContent:['@use \'sass:color\';\n\n/*!\n * SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n// SCSS darken/lighten function override\n@function nc-darken($color, $value) {\n\t@return color.adjust($color, $lightness: - $value, $space: hsl);\n}\n\n@function nc-lighten($color, $value) {\n\t@return color.adjust($color, $lightness: $value, $space: hsl);\n}\n\n// SCSS variables\n// DEPRECATED, please use CSS4 vars\n$color-main-text: #222 !default; // Not #000 for better readability\n$color-main-background: #fff !default;\n$color-main-background-translucent: rgba($color-main-background, .97) !default;\n\n// used for different active/hover/focus/disabled states\n$color-background-hover: nc-darken($color-main-background, 4%) !default;\n$color-background-dark: nc-darken($color-main-background, 7%) !default;\n$color-background-darker: nc-darken($color-main-background, 14%) !default;\n\n$color-placeholder-light: nc-darken($color-main-background, 10%) !default;\n$color-placeholder-dark: nc-darken($color-main-background, 20%) !default;\n\n$color-primary: #0082c9 !default;\n$color-primary-hover: color.mix($color-primary, $color-main-background, 80%) !default;\n\n$color-primary-light: color.mix($color-primary, $color-main-background, 10%) !default;\n$color-primary-light-text: $color-primary !default;\n$color-primary-light-hover: color.mix($color-primary-light, $color-main-text, 95%) !default;\n\n$color-primary-text: #ffffff !default;\n// do not use nc-darken/lighten in case of overriding because\n// primary-text is independent of color-main-text\n$color-primary-element-text-dark: color.adjust($color-primary-text, $lightness: -7%, $space: hsl) !default;\n$color-primary-element: $color-primary !default;\n$color-primary-element-hover: color.mix($color-primary-element, $color-main-background, 80%) !default;\n$color-primary-element-light: color.adjust($color-primary-element, $lightness: 15%, $space: hsl) !default;\n\n$color-error: #e9322d;\n$color-error-hover: color.mix($color-error, $color-main-background, 80%) !default;\n$color-warning: #eca700;\n$color-warning-hover: color.mix($color-warning, $color-main-background, 80%) !default;\n$color-success: #46ba61;\n$color-success-hover: color.mix($color-success, $color-main-background, 80%) !default;\n// used for svg\n$color-white: #fff;\n$color-black: #000;\n$color-yellow: #FC0;\n\n// rgb(118, 118, 118) / #767676\n// min. color contrast for normal text on white background according to WCAG AA\n// (Works as well: color: #000; opacity: 0.57;)\n$color-text-maxcontrast: nc-lighten($color-main-text, 33%) !default;\n\n$image-logo: url(\'../img/logo/logo.svg?v=1\') !default;\n$image-login-background: url(\'../img/background.png?v=2\') !default;\n$image-logoheader: url(\'../img/logo/logo.svg?v=1\') !default;\n$image-favicon: url(\'../img/logo/logo.svg?v=1\') !default;\n\n$color-loading-light: #ccc !default;\n$color-loading-dark: #444 !default;\n\n$color-box-shadow: color.adjust(nc-darken($color-main-background, 70%), $alpha: -0.5, $space: hsl) !default;\n\n// light border like file table or app-content list\n$color-border: nc-darken($color-main-background, 7%) !default;\n// darker border like inputs or very visible elements\n$color-border-dark: nc-darken($color-main-background, 14%) !default;\n\n$border-radius: 3px !default;\n$border-radius-large: 10px !default;\n// Pill-style button, value is large so big buttons also have correct roundness\n$border-radius-pill: 100px !default;\n\n$font-face: system-ui, -apple-system, "Segoe UI", Roboto, Oxygen-Sans, Cantarell, Ubuntu, "Helvetica Neue", "Noto Sans", "Liberation Sans", Arial, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji" !default;\n$default-font-size: 15px;\n\n$default-line-height: 24px;\n\n$animation-quick: 100ms;\n$animation-slow: 300ms;\n\n// various structure data\n$header-height: 50px;\n$navigation-width: 300px;\n$sidebar-min-width: 300px;\n$sidebar-max-width: 500px;\n$list-min-width: 200px;\n$list-max-width: 300px;\n$header-menu-item-height: 44px;\n$header-menu-profile-item-height: 66px;\n\n// mobile. Keep in sync with core/js/js.js\n$breakpoint-mobile: 1024px;\n',"\n@use '../../../../../core/css/variables.scss' as variables;\n@use 'sass:math';\n\n.app-item {\n\tposition: relative;\n\n\t&:hover {\n\t\tbackground-color: var(--color-background-dark);\n\t}\n\n\t&--list-view {\n\t\t--app-item-padding: calc(var(--default-grid-baseline) * 2);\n\t\t--app-item-height: calc(var(--default-clickable-area) + var(--app-item-padding) * 2);\n\n\t\t&.app-item--selected {\n\t\t\tbackground-color: var(--color-background-dark);\n\t\t}\n\n\t\t> * {\n\t\t\tvertical-align: middle;\n\t\t\tborder-bottom: 1px solid var(--color-border);\n\t\t\tpadding: var(--app-item-padding);\n\t\t\theight: var(--app-item-height);\n\t\t}\n\n\t\t.app-image {\n\t\t\twidth: var(--default-clickable-area);\n\t\t\theight: auto;\n\t\t\ttext-align: end;\n\t\t}\n\n\t\t.app-image-icon svg,\n\t\t.app-image-icon .icon-settings-dark {\n\t\t\tmargin-top: 5px;\n\t\t\twidth: 20px;\n\t\t\theight: 20px;\n\t\t\topacity: .5;\n\t\t\tbackground-size: cover;\n\t\t\tdisplay: inline-block;\n\t\t}\n\n\t\t.app-name {\n\t\t\tpadding: 0 var(--app-item-padding);\n\t\t}\n\n\t\t.app-name--link {\n\t\t\theight: var(--app-item-height);\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t}\n\n\t\t// Note: because of Safari bug, we cannot position link overlay relative to the table row\n\t\t// So we need to manually position it relative to the table container and cell\n\t\t// See: https://bugs.webkit.org/show_bug.cgi?id=240961\n\t\t.app-name--link::after {\n\t\t\tcontent: '';\n\t\t\tposition: absolute;\n\t\t\tinset-inline: 0;\n\t\t\theight: var(--app-item-height);\n\t\t}\n\n\t\t.app-actions {\n\t\t\tdisplay: flex;\n\t\t\tgap: var(--app-item-padding);\n\t\t\tflex-wrap: wrap;\n\t\t\tjustify-content: end;\n\n\t\t\t.icon-loading-small {\n\t\t\t\tdisplay: inline-block;\n\t\t\t\ttop: 4px;\n\t\t\t\tmargin-inline-end: 10px;\n\t\t\t}\n\t\t}\n\n\t\t/* hide app version and level on narrower screens */\n\t\t@media only screen and (max-width: 900px) {\n\t\t\t.app-version,\n\t\t\t.app-level {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\n\t\t/* Hide actions on a small screen. Click on app opens fill-screen sidebar with the buttons */\n\t\t@media only screen and (max-width: math.div(variables.$breakpoint-mobile, 2)) {\n\t\t\t.app-actions {\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t}\n\t}\n\n\t&--store-view {\n\t\tpadding: 30px;\n\n\t\t.app-image-icon .icon-settings-dark {\n\t\t\twidth: 100%;\n\t\t\theight: 150px;\n\t\t\tbackground-size: 45px;\n\t\t\topacity: 0.5;\n\t\t}\n\n\t\t.app-image-icon svg {\n\t\t\tposition: absolute;\n\t\t\tbottom: 43px;\n\t\t\t/* position halfway vertically */\n\t\t\twidth: 64px;\n\t\t\theight: 64px;\n\t\t\topacity: .1;\n\t\t}\n\n\t\t.app-name {\n\t\t\tmargin: 5px 0;\n\t\t}\n\n\t\t.app-name--link::after {\n\t\t\tcontent: '';\n\t\t\tposition: absolute;\n\t\t\tinset-block: 0;\n\t\t\tinset-inline: 0;\n\t\t}\n\n\t\t.app-actions {\n\t\t\tmargin: 10px 0;\n\t\t}\n\n\t\t@media only screen and (min-width: 1601px) {\n\t\t\twidth: 25%;\n\n\t\t\t&.app-item--with-sidebar {\n\t\t\t\twidth: 33%;\n\t\t\t}\n\t\t}\n\n\t\t@media only screen and (max-width: 1600px) {\n\t\t\twidth: 25%;\n\n\t\t\t&.app-item--with-sidebar {\n\t\t\t\twidth: 33%;\n\t\t\t}\n\t\t}\n\n\t\t@media only screen and (max-width: 1400px) {\n\t\t\twidth: 33%;\n\n\t\t\t&.app-item--with-sidebar {\n\t\t\t\twidth: 50%;\n\t\t\t}\n\t\t}\n\n\t\t@media only screen and (max-width: 900px) {\n\t\t\twidth: 50%;\n\n\t\t\t&.app-item--with-sidebar {\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t}\n\n\t\t@media only screen and (max-width: variables.$breakpoint-mobile) {\n\t\t\twidth: 50%;\n\t\t}\n\n\t\t@media only screen and (max-width: 480px) {\n\t\t\twidth: 100%;\n\t\t}\n\t}\n}\n\n.app-icon {\n\tfilter: var(--background-invert-if-bright);\n}\n\n.app-image {\n\tposition: relative;\n\theight: 150px;\n\topacity: 1;\n\toverflow: hidden;\n\n\timg {\n\t\twidth: 100%;\n\t}\n}\n\n.app-version {\n\tcolor: var(--color-text-maxcontrast);\n}\n"],sourceRoot:""}]);const p=s},69423:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,".app-sidebar--with-screenshot[data-v-ffae2952] .app-sidebar-header__figure{background-size:cover}.app-sidebar__fallback-icon[data-v-ffae2952]{width:100%;height:100%}.app-sidebar__badges[data-v-ffae2952]{display:flex;flex-direction:row;gap:12px}.app-sidebar__version[data-v-ffae2952]{color:var(--color-text-maxcontrast)}","",{version:3,sources:["webpack://./apps/settings/src/views/AppStoreSidebar.vue"],names:[],mappings:"AAIE,2EACC,qBAAA,CAIF,6CAEC,UAAA,CACA,WAAA,CAGD,sCACC,YAAA,CACA,kBAAA,CACA,QAAA,CAGD,uCACC,mCAAA",sourcesContent:["\n.app-sidebar {\n\t// If a screenshot is available it should cover the whole figure\n\t&--with-screenshot {\n\t\t:deep(.app-sidebar-header__figure) {\n\t\t\tbackground-size: cover;\n\t\t}\n\t}\n\n\t&__fallback-icon {\n\t\t// both 100% to center the icon\n\t\twidth: 100%;\n\t\theight: 100%;\n\t}\n\n\t&__badges {\n\t\tdisplay: flex;\n\t\tflex-direction: row;\n\t\tgap: 12px;\n\t}\n\n\t&__version {\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n}\n"],sourceRoot:""}]);const p=s},70339:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,"\n.deploy-option[data-v-d7fb3b54] {\n\tmargin: calc(var(--default-grid-baseline) * 4) 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n&__hint[data-v-d7fb3b54] {\n\t\tmargin-top: 4px;\n\t\tfont-size: 0.8em;\n\t\tcolor: var(--color-text-maxcontrast);\n}\n}\n.envs[data-v-d7fb3b54] {\n\twidth: 100%;\n\toverflow: auto;\n\theight: 100%;\n\tmax-height: 300px;\nli[data-v-d7fb3b54] {\n\t\tmargin: 10px 0;\n}\n}\n","",{version:3,sources:["webpack://./apps/settings/src/components/AppStoreSidebar/AppDeployOptionsModal.vue"],names:[],mappings:";AAwSA;CACA,gDAAA;CACA,aAAA;CACA,sBAAA;CACA,uBAAA;AAEA;EACA,eAAA;EACA,gBAAA;EACA,oCAAA;AACA;AACA;AAEA;CACA,WAAA;CACA,cAAA;CACA,YAAA;CACA,iBAAA;AAEA;EACA,cAAA;AACA;AACA",sourcesContent:["\x3c!--\n  - SPDX-FileCopyrightText: 2024 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n\n<template>\n\t<NcDialog :open=\"show\"\n\t\tsize=\"normal\"\n\t\t:name=\"t('settings', 'Advanced deploy options')\"\n\t\t@update:open=\"$emit('update:show', $event)\">\n\t\t<div class=\"modal__content\">\n\t\t\t<p class=\"deploy-option__hint\">\n\t\t\t\t{{ configuredDeployOptions === null ? t('settings', 'Edit ExApp deploy options before installation') : t('settings', 'Configured ExApp deploy options. Can be set only during installation') }}.\n\t\t\t\t<a v-if=\"deployOptionsDocsUrl\" :href=\"deployOptionsDocsUrl\">\n\t\t\t\t\t{{ t('settings', 'Learn more') }}\n\t\t\t\t</a>\n\t\t\t</p>\n\t\t\t<h3 v-if=\"environmentVariables.length > 0 || (configuredDeployOptions !== null && configuredDeployOptions.environment_variables.length > 0)\">\n\t\t\t\t{{ t('settings', 'Environment variables') }}\n\t\t\t</h3>\n\t\t\t<template v-if=\"configuredDeployOptions === null\">\n\t\t\t\t<div v-for=\"envVar in environmentVariables\"\n\t\t\t\t\t:key=\"envVar.envName\"\n\t\t\t\t\tclass=\"deploy-option\">\n\t\t\t\t\t<NcTextField :label=\"envVar.displayName\" :value.sync=\"deployOptions.environment_variables[envVar.envName]\" />\n\t\t\t\t\t<p class=\"deploy-option__hint\">\n\t\t\t\t\t\t{{ envVar.description }}\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<fieldset v-else-if=\"Object.keys(configuredDeployOptions).length > 0\"\n\t\t\t\tclass=\"envs\">\n\t\t\t\t<legend class=\"deploy-option__hint\">\n\t\t\t\t\t{{ t('settings', 'ExApp container environment variables') }}\n\t\t\t\t</legend>\n\t\t\t\t<NcTextField v-for=\"(value, key) in configuredDeployOptions.environment_variables\"\n\t\t\t\t\t:key=\"key\"\n\t\t\t\t\t:label=\"value.displayName ?? key\"\n\t\t\t\t\t:helper-text=\"value.description\"\n\t\t\t\t\t:value=\"value.value\"\n\t\t\t\t\treadonly />\n\t\t\t</fieldset>\n\t\t\t<template v-else>\n\t\t\t\t<p class=\"deploy-option__hint\">\n\t\t\t\t\t{{ t('settings', 'No environment variables defined') }}\n\t\t\t\t</p>\n\t\t\t</template>\n\n\t\t\t<h3>{{ t('settings', 'Mounts') }}</h3>\n\t\t\t<template v-if=\"configuredDeployOptions === null\">\n\t\t\t\t<p class=\"deploy-option__hint\">\n\t\t\t\t\t{{ t('settings', 'Define host folder mounts to bind to the ExApp container') }}\n\t\t\t\t</p>\n\t\t\t\t<NcNoteCard type=\"info\" :text=\"t('settings', 'Must exist on the Deploy daemon host prior to installing the ExApp')\" />\n\t\t\t\t<div v-for=\"mount in deployOptions.mounts\"\n\t\t\t\t\t:key=\"mount.hostPath\"\n\t\t\t\t\tclass=\"deploy-option\"\n\t\t\t\t\tstyle=\"display: flex; align-items: center; justify-content: space-between; flex-direction: row;\">\n\t\t\t\t\t<NcTextField :label=\"t('settings', 'Host path')\" :value.sync=\"mount.hostPath\" />\n\t\t\t\t\t<NcTextField :label=\"t('settings', 'Container path')\" :value.sync=\"mount.containerPath\" />\n\t\t\t\t\t<NcCheckboxRadioSwitch :checked.sync=\"mount.readonly\">\n\t\t\t\t\t\t{{ t('settings', 'Read-only') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t<NcButton :aria-label=\"t('settings', 'Remove mount')\"\n\t\t\t\t\t\tstyle=\"margin-top: 6px;\"\n\t\t\t\t\t\t@click=\"removeMount(mount)\">\n\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t<NcIconSvgWrapper :path=\"mdiDeleteOutline\" />\n\t\t\t\t\t\t</template>\n\t\t\t\t\t</NcButton>\n\t\t\t\t</div>\n\t\t\t\t<div v-if=\"addingMount\" class=\"deploy-option\">\n\t\t\t\t\t<h4>\n\t\t\t\t\t\t{{ t('settings', 'New mount') }}\n\t\t\t\t\t</h4>\n\t\t\t\t\t<div style=\"display: flex; align-items: center; justify-content: space-between; flex-direction: row;\">\n\t\t\t\t\t\t<NcTextField ref=\"newMountHostPath\"\n\t\t\t\t\t\t\t:label=\"t('settings', 'Host path')\"\n\t\t\t\t\t\t\t:aria-label=\"t('settings', 'Enter path to host folder')\"\n\t\t\t\t\t\t\t:value.sync=\"newMountPoint.hostPath\" />\n\t\t\t\t\t\t<NcTextField :label=\"t('settings', 'Container path')\"\n\t\t\t\t\t\t\t:aria-label=\"t('settings', 'Enter path to container folder')\"\n\t\t\t\t\t\t\t:value.sync=\"newMountPoint.containerPath\" />\n\t\t\t\t\t\t<NcCheckboxRadioSwitch :checked.sync=\"newMountPoint.readonly\"\n\t\t\t\t\t\t\t:aria-label=\"t('settings', 'Toggle read-only mode')\">\n\t\t\t\t\t\t\t{{ t('settings', 'Read-only') }}\n\t\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div style=\"display: flex; align-items: center; margin-top: 4px;\">\n\t\t\t\t\t\t<NcButton :aria-label=\"t('settings', 'Confirm adding new mount')\"\n\t\t\t\t\t\t\t@click=\"addMountPoint\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<NcIconSvgWrapper :path=\"mdiCheck\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t('settings', 'Confirm') }}\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t\t<NcButton :aria-label=\"t('settings', 'Cancel adding mount')\"\n\t\t\t\t\t\t\tstyle=\"margin-left: 4px;\"\n\t\t\t\t\t\t\t@click=\"cancelAddMountPoint\">\n\t\t\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t\t\t<NcIconSvgWrapper :path=\"mdiClose\" />\n\t\t\t\t\t\t\t</template>\n\t\t\t\t\t\t\t{{ t('settings', 'Cancel') }}\n\t\t\t\t\t\t</NcButton>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<NcButton v-if=\"!addingMount\"\n\t\t\t\t\t:aria-label=\"t('settings', 'Add mount')\"\n\t\t\t\t\tstyle=\"margin-top: 5px;\"\n\t\t\t\t\t@click=\"startAddingMount\">\n\t\t\t\t\t<template #icon>\n\t\t\t\t\t\t<NcIconSvgWrapper :path=\"mdiPlus\" />\n\t\t\t\t\t</template>\n\t\t\t\t\t{{ t('settings', 'Add mount') }}\n\t\t\t\t</NcButton>\n\t\t\t</template>\n\t\t\t<template v-else-if=\"configuredDeployOptions.mounts.length > 0\">\n\t\t\t\t<p class=\"deploy-option__hint\">\n\t\t\t\t\t{{ t('settings', 'ExApp container mounts') }}\n\t\t\t\t</p>\n\t\t\t\t<div v-for=\"mount in configuredDeployOptions.mounts\"\n\t\t\t\t\t:key=\"mount.hostPath\"\n\t\t\t\t\tclass=\"deploy-option\"\n\t\t\t\t\tstyle=\"display: flex; align-items: center; justify-content: space-between; flex-direction: row;\">\n\t\t\t\t\t<NcTextField :label=\"t('settings', 'Host path')\" :value.sync=\"mount.hostPath\" readonly />\n\t\t\t\t\t<NcTextField :label=\"t('settings', 'Container path')\" :value.sync=\"mount.containerPath\" readonly />\n\t\t\t\t\t<NcCheckboxRadioSwitch :checked.sync=\"mount.readonly\" disabled>\n\t\t\t\t\t\t{{ t('settings', 'Read-only') }}\n\t\t\t\t\t</NcCheckboxRadioSwitch>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t\t<p v-else class=\"deploy-option__hint\">\n\t\t\t\t{{ t('settings', 'No mounts defined') }}\n\t\t\t</p>\n\t\t</div>\n\n\t\t<template v-if=\"!app.active && (app.canInstall || app.isCompatible) && configuredDeployOptions === null\" #actions>\n\t\t\t<NcButton :title=\"enableButtonTooltip\"\n\t\t\t\t:aria-label=\"enableButtonTooltip\"\n\t\t\t\ttype=\"primary\"\n\t\t\t\t:disabled=\"!app.canInstall || installing || isLoading || !defaultDeployDaemonAccessible || isInitializing || isDeploying\"\n\t\t\t\t@click.stop=\"submitDeployOptions\">\n\t\t\t\t{{ enableButtonText }}\n\t\t\t</NcButton>\n\t\t</template>\n\t</NcDialog>\n</template>\n\n<script>\nimport { computed, ref } from 'vue'\n\nimport axios from '@nextcloud/axios'\nimport { generateUrl } from '@nextcloud/router'\nimport { loadState } from '@nextcloud/initial-state'\nimport { emit } from '@nextcloud/event-bus'\n\nimport NcDialog from '@nextcloud/vue/components/NcDialog'\nimport NcTextField from '@nextcloud/vue/components/NcTextField'\nimport NcNoteCard from '@nextcloud/vue/components/NcNoteCard'\nimport NcButton from '@nextcloud/vue/components/NcButton'\nimport NcIconSvgWrapper from '@nextcloud/vue/components/NcIconSvgWrapper'\nimport NcCheckboxRadioSwitch from '@nextcloud/vue/components/NcCheckboxRadioSwitch'\n\nimport { mdiPlus, mdiCheck, mdiClose, mdiDeleteOutline } from '@mdi/js'\n\nimport { useAppApiStore } from '../../store/app-api-store.ts'\nimport { useAppsStore } from '../../store/apps-store.ts'\n\nimport AppManagement from '../../mixins/AppManagement.js'\n\nexport default {\n\tname: 'AppDeployOptionsModal',\n\tcomponents: {\n\t\tNcDialog,\n\t\tNcTextField,\n\t\tNcButton,\n\t\tNcNoteCard,\n\t\tNcCheckboxRadioSwitch,\n\t\tNcIconSvgWrapper,\n\t},\n\tmixins: [AppManagement],\n\tprops: {\n\t\tapp: {\n\t\t\ttype: Object,\n\t\t\trequired: true,\n\t\t},\n\t\tshow: {\n\t\t\ttype: Boolean,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup(props) {\n\t\t// for AppManagement mixin\n\t\tconst store = useAppsStore()\n\t\tconst appApiStore = useAppApiStore()\n\n\t\tconst environmentVariables = computed(() => {\n\t\t\tif (props.app?.releases?.length === 1) {\n\t\t\t\treturn props.app?.releases[0]?.environmentVariables || []\n\t\t\t}\n\t\t\treturn []\n\t\t})\n\n\t\tconst deployOptions = ref({\n\t\t\tenvironment_variables: environmentVariables.value.reduce((acc, envVar) => {\n\t\t\t\tacc[envVar.envName] = envVar.default || ''\n\t\t\t\treturn acc\n\t\t\t}, {}),\n\t\t\tmounts: [],\n\t\t})\n\n\t\treturn {\n\t\t\tenvironmentVariables,\n\t\t\tdeployOptions,\n\t\t\tstore,\n\t\t\tappApiStore,\n\t\t\tmdiPlus,\n\t\t\tmdiCheck,\n\t\t\tmdiClose,\n\t\t\tmdiDeleteOutline,\n\t\t}\n\t},\n\tdata() {\n\t\treturn {\n\t\t\taddingMount: false,\n\t\t\tnewMountPoint: {\n\t\t\t\thostPath: '',\n\t\t\t\tcontainerPath: '',\n\t\t\t\treadonly: false,\n\t\t\t},\n\t\t\taddingPortBinding: false,\n\t\t\tconfiguredDeployOptions: null,\n\t\t\tdeployOptionsDocsUrl: loadState('settings', 'deployOptionsDocsUrl', null),\n\t\t}\n\t},\n\twatch: {\n\t\tshow(newShow) {\n\t\t\tif (newShow) {\n\t\t\t\tthis.fetchExAppDeployOptions()\n\t\t\t} else {\n\t\t\t\tthis.configuredDeployOptions = null\n\t\t\t}\n\t\t},\n\t},\n\tmethods: {\n\t\tstartAddingMount() {\n\t\t\tthis.addingMount = true\n\t\t\tthis.$nextTick(() => {\n\t\t\t\tthis.$refs.newMountHostPath.focus()\n\t\t\t})\n\t\t},\n\t\taddMountPoint() {\n\t\t\tthis.deployOptions.mounts.push(this.newMountPoint)\n\t\t\tthis.newMountPoint = {\n\t\t\t\thostPath: '',\n\t\t\t\tcontainerPath: '',\n\t\t\t\treadonly: false,\n\t\t\t}\n\t\t\tthis.addingMount = false\n\t\t},\n\t\tcancelAddMountPoint() {\n\t\t\tthis.newMountPoint = {\n\t\t\t\thostPath: '',\n\t\t\t\tcontainerPath: '',\n\t\t\t\treadonly: false,\n\t\t\t}\n\t\t\tthis.addingMount = false\n\t\t},\n\t\tremoveMount(mountToRemove) {\n\t\t\tthis.deployOptions.mounts = this.deployOptions.mounts.filter(mount => mount !== mountToRemove)\n\t\t},\n\t\tasync fetchExAppDeployOptions() {\n\t\t\treturn axios.get(generateUrl(`/apps/app_api/apps/deploy-options/${this.app.id}`))\n\t\t\t\t.then(response => {\n\t\t\t\t\tthis.configuredDeployOptions = response.data\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\tthis.configuredDeployOptions = null\n\t\t\t\t})\n\t\t},\n\t\tasync submitDeployOptions() {\n\t\t\tawait this.appApiStore.fetchDockerDaemons()\n\t\t\tif (this.appApiStore.dockerDaemons.length === 1 && this.app.needsDownload) {\n\t\t\t\tthis.enable(this.app.id, this.appApiStore.dockerDaemons[0], this.deployOptions)\n\t\t\t} else if (this.app.needsDownload) {\n\t\t\t\temit('showDaemonSelectionModal', this.deployOptions)\n\t\t\t} else {\n\t\t\t\tthis.enable(this.app.id, this.app.daemon, this.deployOptions)\n\t\t\t}\n\t\t\tthis.$emit('update:show', false)\n\t\t},\n\t},\n}\n<\/script>\n\n<style scoped>\n.deploy-option {\n\tmargin: calc(var(--default-grid-baseline) * 4) 0;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: flex-start;\n\n\t&__hint {\n\t\tmargin-top: 4px;\n\t\tfont-size: 0.8em;\n\t\tcolor: var(--color-text-maxcontrast);\n\t}\n}\n\n.envs {\n\twidth: 100%;\n\toverflow: auto;\n\theight: 100%;\n\tmax-height: 300px;\n\n\tli {\n\t\tmargin: 10px 0;\n\t}\n}\n</style>\n"],sourceRoot:""}]);const p=s},73855:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,".app-description[data-v-10fcea52]{padding:12px}","",{version:3,sources:["webpack://./apps/settings/src/components/AppStoreSidebar/AppDescriptionTab.vue"],names:[],mappings:"AACA,kCACC,YAAA",sourcesContent:["\n.app-description {\n\tpadding: 12px;\n}\n"],sourceRoot:""}]);const p=s},78451:(t,e,n)=>{n.r(e),n.d(e,{default:()=>T});var a=n(85471),i=n(81222),o=n(53334),s=n(92973),p=n(846),r=n(42530),l=n(52439),d=n(542),c=n(85947),u=n(6695),A=n(2645),g=n(86438);const m=(0,a.pM)({__name:"AppStoreNavigation",setup(t){const e=(0,i.C)("settings","appstoreEnabled",!0),n=(0,i.C)("settings","appstoreDeveloperDocs",""),m=(0,p.T)(),v=(0,a.EW)(()=>m.categories),h=(0,a.EW)(()=>m.loading.categories),b=(0,a.EW)(()=>void 0!==m.apps.find(t=>{let{level:e}=t;return 300===e}));return(0,a.KC)(()=>{m.loadCategories(),m.loadApps()}),{__sfc:!0,appstoreEnabled:e,developerDocsUrl:n,store:m,categories:v,categoriesLoading:h,isSubscribed:b,t:o.Tl,APPS_SECTION_ENUM:s.l,NcAppNavigation:r.A,NcAppNavigationItem:l.A,NcAppNavigationSpacer:d.A,NcCounterBubble:c.A,NcIconSvgWrapper:u.A,NcLoadingIcon:A.A,APPSTORE_CATEGORY_ICONS:g.A}}});var v=n(85072),h=n.n(v),b=n(97825),C=n.n(b),f=n(77659),y=n.n(f),_=n(55056),x=n.n(_),w=n(10540),S=n.n(w),k=n(41113),N=n.n(k),D=n(18460),I={};I.styleTagTransform=N(),I.setAttributes=x(),I.insert=y().bind(null,"head"),I.domAPI=C(),I.insertStyleElement=S(),h()(D.A,I),D.A&&D.A.locals&&D.A.locals;const T=(0,n(14486).A)(m,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcAppNavigation,{attrs:{"aria-label":n.t("settings","Apps")},scopedSlots:t._u([{key:"list",fn:function(){return[n.appstoreEnabled?e(n.NcAppNavigationItem,{attrs:{id:"app-category-discover",to:{name:"apps-category",params:{category:"discover"}},name:n.APPS_SECTION_ENUM.discover},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:n.APPSTORE_CATEGORY_ICONS.discover}})]},proxy:!0}],null,!1,1397544286)}):t._e(),t._v(" "),e(n.NcAppNavigationItem,{attrs:{id:"app-category-installed",to:{name:"apps-category",params:{category:"installed"}},name:n.APPS_SECTION_ENUM.installed},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:n.APPSTORE_CATEGORY_ICONS.installed}})]},proxy:!0}])}),t._v(" "),e(n.NcAppNavigationItem,{attrs:{id:"app-category-enabled",to:{name:"apps-category",params:{category:"enabled"}},name:n.APPS_SECTION_ENUM.enabled},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:n.APPSTORE_CATEGORY_ICONS.enabled}})]},proxy:!0}])}),t._v(" "),e(n.NcAppNavigationItem,{attrs:{id:"app-category-disabled",to:{name:"apps-category",params:{category:"disabled"}},name:n.APPS_SECTION_ENUM.disabled},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:n.APPSTORE_CATEGORY_ICONS.disabled}})]},proxy:!0}])}),t._v(" "),n.store.updateCount>0?e(n.NcAppNavigationItem,{attrs:{id:"app-category-updates",to:{name:"apps-category",params:{category:"updates"}},name:n.APPS_SECTION_ENUM.updates},scopedSlots:t._u([{key:"counter",fn:function(){return[e(n.NcCounterBubble,[t._v(t._s(n.store.updateCount))])]},proxy:!0},{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:n.APPSTORE_CATEGORY_ICONS.updates}})]},proxy:!0}],null,!1,3001044337)}):t._e(),t._v(" "),e(n.NcAppNavigationItem,{attrs:{id:"app-category-your-bundles",to:{name:"apps-category",params:{category:"app-bundles"}},name:n.APPS_SECTION_ENUM["app-bundles"]},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:n.APPSTORE_CATEGORY_ICONS.bundles}})]},proxy:!0}])}),t._v(" "),e(n.NcAppNavigationSpacer),t._v(" "),n.appstoreEnabled&&n.categoriesLoading?e("li",{staticClass:"categories--loading"},[e(n.NcLoadingIcon,{attrs:{size:20,"aria-label":n.t("settings","Loading categories")}})],1):n.appstoreEnabled&&!n.categoriesLoading?[n.isSubscribed?e(n.NcAppNavigationItem,{attrs:{id:"app-category-supported",to:{name:"apps-category",params:{category:"supported"}},name:n.APPS_SECTION_ENUM.supported},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:n.APPSTORE_CATEGORY_ICONS.supported}})]},proxy:!0}],null,!1,613663011)}):t._e(),t._v(" "),e(n.NcAppNavigationItem,{attrs:{id:"app-category-featured",to:{name:"apps-category",params:{category:"featured"}},name:n.APPS_SECTION_ENUM.featured},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:n.APPSTORE_CATEGORY_ICONS.featured}})]},proxy:!0}])}),t._v(" "),t._l(n.categories,function(a){return e(n.NcAppNavigationItem,{key:a.id,attrs:{id:"app-category-".concat(a.id),name:a.displayName,to:{name:"apps-category",params:{category:a.id}}},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:a.icon}})]},proxy:!0}],null,!0)})})]:t._e(),t._v(" "),e(n.NcAppNavigationItem,{attrs:{id:"app-developer-docs",name:n.t("settings","Developer documentation â†—"),href:n.developerDocsUrl}})]},proxy:!0}])})},[],!1,null,"419cd0cf",null).exports},81757:(t,e,n)=>{n.d(e,{A:()=>_});var a=n(85471),i=n(6695),o=n(9165),s=n(53334);const p=(0,a.pM)({__name:"AppLevelBadge",props:{level:null},setup(t){const e=t,n=(0,a.EW)(()=>300===e.level),p=(0,a.EW)(()=>200===e.level),r=(0,a.EW)(()=>n.value?o.UD9:o.Tfj),l=(0,a.EW)(()=>n.value?(0,s.Tl)("settings","Supported"):(0,s.Tl)("settings","Featured")),d=(0,a.EW)(()=>n.value?(0,s.Tl)("settings","This app is supported via your current Nextcloud subscription."):(0,s.Tl)("settings","Featured apps are developed by and within the community. They offer central functionality and are ready for production use."));return{__sfc:!0,props:e,isSupported:n,isFeatured:p,badgeIcon:r,badgeText:l,badgeTitle:d,NcIconSvgWrapper:i.A}}});var r=n(85072),l=n.n(r),d=n(97825),c=n.n(d),u=n(77659),A=n.n(u),g=n(55056),m=n.n(g),v=n(10540),h=n.n(v),b=n(41113),C=n.n(b),f=n(47780),y={};y.styleTagTransform=C(),y.setAttributes=m(),y.insert=A().bind(null,"head"),y.domAPI=c(),y.insertStyleElement=h(),l()(f.A,y),f.A&&f.A.locals&&f.A.locals;const _=(0,n(14486).A)(p,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return n.isSupported||n.isFeatured?e("span",{staticClass:"app-level-badge",class:{"app-level-badge--supported":n.isSupported},attrs:{title:n.badgeTitle}},[e(n.NcIconSvgWrapper,{attrs:{path:n.badgeIcon,size:20,inline:""}}),t._v("\n\t"+t._s(n.badgeText)+"\n")],1):t._e()},[],!1,null,"4f1ef3a1",null).exports},86438:(t,e,n)=>{n.d(e,{A:()=>i});var a=n(9165);const i=Object.freeze({discover:a.tZc,installed:a.EzL,enabled:a.Tfj,disabled:a.hyP,bundles:a.xR9,supported:a.UD9,featured:a.ZL5,updates:a.XCd,ai:a.aKS,auth:a.Mx_,customization:a.ED,dashboard:a.Knj,files:a.fEr,games:a.v3v,integration:a.bur,monitoring:a.y48,multimedia:a.WI,office:a.Ku3,organization:a.d9V,search:a.U4M,security:a.JiW,social:a.aie,tools:a.QKT,workflow:a.Rt7})},90532:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,"\n.app-score__wrapper[data-v-d9bfc6c8] {\n\tdisplay: inline-flex;\n\tcolor: var(--color-favorite, #a08b00);\n> *[data-v-d9bfc6c8] {\n\t\tvertical-align: text-bottom;\n}\n}\n","",{version:3,sources:["webpack://./apps/settings/src/components/AppList/AppScore.vue"],names:[],mappings:";AA+DA;CACA,oBAAA;CACA,qCAAA;AAEA;EACA,2BAAA;AACA;AACA",sourcesContent:['\x3c!--\n  - SPDX-FileCopyrightText: 2018 Nextcloud GmbH and Nextcloud contributors\n  - SPDX-License-Identifier: AGPL-3.0-or-later\n--\x3e\n\n<template>\n\t<span role="img"\n\t\t:aria-label="title"\n\t\t:title="title"\n\t\tclass="app-score__wrapper">\n\t\t<NcIconSvgWrapper v-for="index in fullStars"\n\t\t\t:key="`full-star-${index}`"\n\t\t\t:path="mdiStar"\n\t\t\tinline />\n\t\t<NcIconSvgWrapper v-if="hasHalfStar" :path="mdiStarHalfFull" inline />\n\t\t<NcIconSvgWrapper v-for="index in emptyStars"\n\t\t\t:key="`empty-star-${index}`"\n\t\t\t:path="mdiStarOutline"\n\t\t\tinline />\n\t</span>\n</template>\n<script lang="ts">\nimport NcIconSvgWrapper from \'@nextcloud/vue/components/NcIconSvgWrapper\'\nimport { mdiStar, mdiStarHalfFull, mdiStarOutline } from \'@mdi/js\'\nimport { translate as t } from \'@nextcloud/l10n\'\nimport { defineComponent } from \'vue\'\n\nexport default defineComponent({\n\tname: \'AppScore\',\n\tcomponents: {\n\t\tNcIconSvgWrapper,\n\t},\n\tprops: {\n\t\tscore: {\n\t\t\ttype: Number,\n\t\t\trequired: true,\n\t\t},\n\t},\n\tsetup() {\n\t\treturn {\n\t\t\tmdiStar,\n\t\t\tmdiStarHalfFull,\n\t\t\tmdiStarOutline,\n\t\t}\n\t},\n\tcomputed: {\n\t\ttitle() {\n\t\t\tconst appScore = (this.score * 5).toFixed(1)\n\t\t\treturn t(\'settings\', \'Community rating: {score}/5\', { score: appScore })\n\t\t},\n\t\tfullStars() {\n\t\t\treturn Math.floor(this.score * 5 + 0.25)\n\t\t},\n\t\temptyStars() {\n\t\t\treturn Math.min(Math.floor((1 - this.score) * 5 + 0.25), 5 - this.fullStars)\n\t\t},\n\t\thasHalfStar() {\n\t\t\treturn (this.fullStars + this.emptyStars) < 5\n\t\t},\n\t},\n})\n<\/script>\n<style scoped>\n.app-score__wrapper {\n\tdisplay: inline-flex;\n\tcolor: var(--color-favorite, #a08b00);\n\n\t> * {\n\t\tvertical-align: text-bottom;\n\t}\n}\n</style>\n'],sourceRoot:""}]);const p=s},92973:(t,e,n)=>{n.d(e,{l:()=>i});var a=n(53334);const i=Object.freeze({discover:(0,a.Tl)("settings","Discover"),installed:(0,a.Tl)("settings","Your apps"),enabled:(0,a.Tl)("settings","Active apps"),disabled:(0,a.Tl)("settings","Disabled apps"),updates:(0,a.Tl)("settings","Updates"),"app-bundles":(0,a.Tl)("settings","App bundles"),featured:(0,a.Tl)("settings","Featured apps"),supported:(0,a.Tl)("settings","Supported apps")})},95970:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,".apps-list[data-v-5548e438]{display:flex;flex-wrap:wrap;align-content:flex-start}.apps-list--move[data-v-5548e438]{transition:transform 1s}.apps-list #app-list-update-all[data-v-5548e438]{margin-inline-start:10px}.apps-list__toolbar[data-v-5548e438]{height:60px;padding:8px;padding-inline-start:60px;width:100%;background-color:var(--color-main-background);position:sticky;top:0;z-index:1;display:flex;align-items:center}.apps-list--list-view[data-v-5548e438]{margin-bottom:100px;position:relative}.apps-list__list-container[data-v-5548e438]{width:100%}.apps-list__store-container[data-v-5548e438]{display:flex;flex-wrap:wrap}.apps-list__bundle-heading[data-v-5548e438]{display:flex;align-items:center;margin-block:20px;margin-inline:0 10px}.apps-list__bundle-header[data-v-5548e438]{color:var(--color-main-text);margin-block:0;margin-inline:50px 10px;font-weight:bold;font-size:20px;line-height:30px}#apps-list-search .app-item h2[data-v-5548e438]{margin-bottom:0}","",{version:3,sources:["webpack://./apps/settings/src/components/AppList.vue"],names:[],mappings:"AAIA,4BACC,YAAA,CACA,cAAA,CACA,wBAAA,CAGA,kCACC,uBAAA,CAGD,iDACC,wBAAA,CAGD,qCACC,WAjBe,CAkBf,WAnBgB,CAqBhB,yBApBe,CAqBf,UAAA,CACA,6CAAA,CACA,eAAA,CACA,KAAA,CACA,SAAA,CACA,YAAA,CACA,kBAAA,CAGD,uCACC,mBAAA,CAEA,iBAAA,CAGD,4CACC,UAAA,CAGD,6CACC,YAAA,CACA,cAAA,CAGD,4CACC,YAAA,CACA,kBAAA,CACA,iBAAA,CACA,oBAAA,CAGD,2CACC,4BAAA,CACA,cAAA,CACA,uBAAA,CACA,gBAAA,CACA,cAAA,CACA,gBAAA,CAMA,gDACC,eAAA",sourcesContent:["\n$toolbar-padding: 8px;\n$toolbar-height: 44px + $toolbar-padding * 2;\n\n.apps-list {\n\tdisplay: flex;\n\tflex-wrap: wrap;\n\talign-content: flex-start;\n\n\t// For transition group\n\t&--move {\n\t\ttransition: transform 1s;\n\t}\n\n\t#app-list-update-all {\n\t\tmargin-inline-start: 10px;\n\t}\n\n\t&__toolbar {\n\t\theight: $toolbar-height;\n\t\tpadding: $toolbar-padding;\n\t\t// Leave room for app-navigation-toggle\n\t\tpadding-inline-start: $toolbar-height;\n\t\twidth: 100%;\n\t\tbackground-color: var(--color-main-background);\n\t\tposition: sticky;\n\t\ttop: 0;\n\t\tz-index: 1;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t}\n\n\t&--list-view {\n\t\tmargin-bottom: 100px;\n\t\t// For positioning link overlay on rows\n\t\tposition: relative;\n\t}\n\n\t&__list-container {\n\t\twidth: 100%;\n\t}\n\n\t&__store-container {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t}\n\n\t&__bundle-heading {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tmargin-block: 20px;\n\t\tmargin-inline: 0 10px;\n\t}\n\n\t&__bundle-header {\n\t\tcolor: var(--color-main-text);\n\t\tmargin-block: 0;\n\t\tmargin-inline: 50px 10px;\n\t\tfont-weight: bold;\n\t\tfont-size: 20px;\n\t\tline-height: 30px;\n\t}\n}\n\n#apps-list-search {\n\t.app-item {\n\t\th2 {\n\t\t\tmargin-bottom: 0;\n\t\t}\n\t}\n}\n"],sourceRoot:""}]);const p=s},96147:(e,n,a)=>{a.r(n),a.d(n,{default:()=>lt});var i=a(85471),o=a(53334),s=a(24387),p=a(846),r=a(92973),l=a(18195),d=a(32190),c=a(2645),u=a(61338);function A(t,e,n){(function(t,e){if(e.has(t))throw new TypeError("Cannot initialize the same private elements twice on an object")})(t,e),e.set(t,n)}function g(t,e,n){return t.set(v(t,e),n),n}function m(t,e){return t.get(v(t,e))}function v(t,e,n){if("function"==typeof t?t===e:t.has(e))return arguments.length<3?e:n;throw new TypeError("Private element is not present on this object")}function h(t,e,n){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}class b{constructor(t){h(this,"value",void 0),h(this,"next",void 0),this.value=t}}var C=new WeakMap,f=new WeakMap,y=new WeakMap;class _{constructor(){A(this,C,void 0),A(this,f,void 0),A(this,y,void 0),this.clear()}enqueue(t){var e;const n=new b(t);m(C,this)?(m(f,this).next=n,g(f,this,n)):(g(C,this,n),g(f,this,n)),g(y,this,(e=m(y,this),++e))}dequeue(){var t;const e=m(C,this);if(e)return g(C,this,m(C,this).next),g(y,this,(t=m(y,this),--t)),e.value}peek(){if(m(C,this))return m(C,this).value}clear(){g(C,this,void 0),g(f,this,void 0),g(y,this,0)}get size(){return m(y,this)}*[Symbol.iterator](){let t=m(C,this);for(;t;)yield t.value,t=t.next}*drain(){for(;m(C,this);)yield this.dequeue()}}function x(t){w(t);const e=new _;let n=0;const a=()=>{n<t&&e.size>0&&(n++,e.dequeue()())},i=async(t,e,i)=>{const o=(async()=>t(...i))();e(o);try{await o}catch(t){}n--,a()},o=function(o){for(var s=arguments.length,p=new Array(s>1?s-1:0),r=1;r<s;r++)p[r-1]=arguments[r];return new Promise(s=>{((o,s,p)=>{new Promise(t=>{e.enqueue(t)}).then(i.bind(void 0,o,s,p)),n<t&&a()})(o,s,p)})};return Object.defineProperties(o,{activeCount:{get:()=>n},pendingCount:{get:()=>e.size},clearQueue:{value(){e.clear()}},concurrency:{get:()=>t,set(i){w(i),t=i,queueMicrotask(()=>{for(;n<t&&e.size>0;)a()})}},map:{async value(t,e){const n=t.map((t,n)=>this(e,t,n));return Promise.all(n)}}}),o}function w(t){if(!Number.isInteger(t)&&t!==Number.POSITIVE_INFINITY||!(t>0))throw new TypeError("Expected `concurrency` to be a number from 1 and up")}var S=a(21376),k=a(58924),N=a(23453),D=a(62938);const I={name:"AppList",components:{AppItem:k.A,NcButton:S.A},mixins:[N.A],props:{category:{type:String,required:!0}},setup:()=>({appApiStore:(0,D.a)(),store:(0,p.T)()}),data:()=>({search:""}),computed:{counter(){return this.apps.filter(t=>t.update).length},loading(){return this.$store.getters["appApiApps/isAppApiEnabled"]?this.$store.getters.loading("list")||this.appApiStore.getLoading("list"):this.$store.getters.loading("list")},hasPendingUpdate(){return this.apps.filter(t=>t.update).length>0},showUpdateAll(){return this.hasPendingUpdate&&this.useListView},apps(){const t=this.$store.getters.isAppApiEnabled?this.appApiStore.getAllApps:[],e=[...this.$store.getters.getAllApps,...t].filter(t=>-1!==t.name.toLowerCase().search(this.search.toLowerCase())).sort(function(t,e){const n=OC.Util.naturalSortCompare(t,e);if(0===n){const n=""+(t.active?0:1)+(t.update?0:1),a=""+(e.active?0:1)+(e.update?0:1);return Number(n)-Number(a)}return n});return"installed"===this.category?e.filter(t=>t.installed):"enabled"===this.category?e.filter(t=>t.active&&t.installed):"disabled"===this.category?e.filter(t=>!t.active&&t.installed):"app-bundles"===this.category?e.filter(t=>t.bundles):"updates"===this.category?e.filter(t=>t.update):"supported"===this.category?e.filter(t=>300===t.level):"featured"===this.category?e.filter(t=>200===t.level):e.filter(t=>t.appstore&&void 0!==t.category&&(t.category===this.category||t.category.indexOf(this.category)>-1))},bundles(){return this.$store.getters.getAppBundles.filter(t=>this.bundleApps(t.id).length>0)},bundleApps:()=>function(t){return this.$store.getters.getAllApps.filter(e=>void 0!==e.bundleIds&&e.bundleIds.includes(t))},searchApps(){if(""===this.search)return[];const t=this.$store.getters.isAppApiEnabled?this.appApiStore.getAllApps:[];return[...this.$store.getters.getAllApps,...t].filter(t=>-1!==t.name.toLowerCase().search(this.search.toLowerCase())&&!this.apps.find(e=>e.id===t.id))},useAppStoreView(){return!this.useListView&&!this.useBundleView},useListView(){return"installed"===this.category||"enabled"===this.category||"disabled"===this.category||"updates"===this.category||"featured"===this.category||"supported"===this.category},useBundleView(){return"app-bundles"===this.category},allBundlesEnabled(){return t=>0===this.bundleApps(t).filter(t=>!t.active).length},bundleToggleText(){return e=>this.allBundlesEnabled(e)?t("settings","Disable all"):t("settings","Download and enable all")}},beforeDestroy(){(0,u.al)("nextcloud:unified-search.search",this.setSearch),(0,u.al)("nextcloud:unified-search.reset",this.resetSearch)},mounted(){(0,u.B1)("nextcloud:unified-search.search",this.setSearch),(0,u.B1)("nextcloud:unified-search.reset",this.resetSearch)},methods:{setSearch(t){let{query:e}=t;this.search=e},resetSearch(){this.search=""},toggleBundle(t){return this.allBundlesEnabled(t)?this.disableBundle(t):this.enableBundle(t)},enableBundle(t){const e=this.bundleApps(t).map(t=>t.id);this.$store.dispatch("enableApp",{appId:e,groups:[]}).catch(t=>{console.error(t),OC.Notification.show(t)})},disableBundle(t){const e=this.bundleApps(t).map(t=>t.id);this.$store.dispatch("disableApp",{appId:e,groups:[]}).catch(t=>{OC.Notification.show(t)})},updateAll(){const t=x(1);this.apps.filter(t=>t.update).map(e=>t(()=>{this.update(e.id)}))}}};var T=a(85072),E=a.n(T),O=a(97825),B=a.n(O),P=a(77659),M=a.n(P),$=a(55056),L=a.n($),R=a(10540),W=a.n(R),U=a(41113),G=a.n(U),F=a(95970),z={};z.styleTagTransform=G(),z.setAttributes=L(),z.insert=M().bind(null,"head"),z.domAPI=B(),z.insertStyleElement=W(),E()(F.A,z),F.A&&F.A.locals&&F.A.locals;var j=a(14486);const V=(0,j.A)(I,function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app-content-inner"}},[e("div",{staticClass:"apps-list",class:{"apps-list--list-view":t.useBundleView||t.useListView,"apps-list--store-view":t.useAppStoreView},attrs:{id:"apps-list"}},[t.useListView?[t.showUpdateAll?e("div",{staticClass:"apps-list__toolbar"},[t._v("\n\t\t\t\t"+t._s(t.n("settings","%n app has an update available","%n apps have an update available",t.counter))+"\n\t\t\t\t"),t.showUpdateAll?e("NcButton",{attrs:{id:"app-list-update-all",type:"primary"},on:{click:t.updateAll}},[t._v("\n\t\t\t\t\t"+t._s(t.n("settings","Update","Update all",t.counter))+"\n\t\t\t\t")]):t._e()],1):t._e(),t._v(" "),t.showUpdateAll?t._e():e("div",{staticClass:"apps-list__toolbar"},[t._v("\n\t\t\t\t"+t._s(t.t("settings","All apps are up-to-date."))+"\n\t\t\t")]),t._v(" "),e("TransitionGroup",{staticClass:"apps-list__list-container",attrs:{name:"apps-list",tag:"table"}},[e("tr",{key:"app-list-view-header"},[e("th",[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Icon")))])]),t._v(" "),e("th",[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Name")))])]),t._v(" "),e("th",[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Version")))])]),t._v(" "),e("th",[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Level")))])]),t._v(" "),e("th",[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Actions")))])])]),t._v(" "),t._l(t.apps,function(n){return e("AppItem",{key:n.id,attrs:{app:n,category:t.category}})})],2)]:t._e(),t._v(" "),t.useBundleView?e("table",{staticClass:"apps-list__list-container"},[e("tr",{key:"app-list-view-header"},[e("th",{attrs:{id:"app-table-col-icon"}},[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Icon")))])]),t._v(" "),e("th",{attrs:{id:"app-table-col-name"}},[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Name")))])]),t._v(" "),e("th",{attrs:{id:"app-table-col-version"}},[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Version")))])]),t._v(" "),e("th",{attrs:{id:"app-table-col-level"}},[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Level")))])]),t._v(" "),e("th",{attrs:{id:"app-table-col-actions"}},[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Actions")))])])]),t._v(" "),t._l(t.bundles,function(n){return[e("tr",{key:n.id},[e("th",{attrs:{id:"app-table-rowgroup-".concat(n.id),colspan:"5",scope:"rowgroup"}},[e("div",{staticClass:"apps-list__bundle-heading"},[e("span",{staticClass:"apps-list__bundle-header"},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(n.name)+"\n\t\t\t\t\t\t\t")]),t._v(" "),e("NcButton",{attrs:{type:"secondary"},on:{click:function(e){return t.toggleBundle(n.id)}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.t("settings",t.bundleToggleText(n.id)))+"\n\t\t\t\t\t\t\t")])],1)])]),t._v(" "),t._l(t.bundleApps(n.id),function(a){return e("AppItem",{key:n.id+a.id,attrs:{"use-bundle-view":!0,headers:"app-table-rowgroup-".concat(n.id),app:a,category:t.category}})})]})],2):t._e(),t._v(" "),t.useAppStoreView?e("ul",{staticClass:"apps-list__store-container"},t._l(t.apps,function(n){return e("AppItem",{key:n.id,attrs:{app:n,category:t.category,"list-view":!1}})}),1):t._e()],2),t._v(" "),e("div",{staticClass:"apps-list apps-list--list-view",attrs:{id:"apps-list-search"}},[e("div",{staticClass:"apps-list__list-container"},[""!==t.search&&t.searchApps.length>0?e("table",{staticClass:"apps-list__list-container"},[e("caption",{staticClass:"apps-list__bundle-header"},[t._v("\n\t\t\t\t\t"+t._s(t.t("settings","Results from other categories"))+"\n\t\t\t\t")]),t._v(" "),e("tr",{key:"app-list-view-header"},[e("th",[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Icon")))])]),t._v(" "),e("th",[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Name")))])]),t._v(" "),e("th",[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Version")))])]),t._v(" "),e("th",[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Level")))])]),t._v(" "),e("th",[e("span",{staticClass:"hidden-visually"},[t._v(t._s(t.t("settings","Actions")))])])]),t._v(" "),t._l(t.searchApps,function(n){return e("AppItem",{key:n.id,attrs:{app:n,category:t.category}})})],2):t._e()])]),t._v(" "),""===t.search||t.loading||0!==t.searchApps.length||0!==t.apps.length?t._e():e("div",{staticClass:"emptycontent emptycontent-search",attrs:{id:"apps-list-empty"}},[e("div",{staticClass:"icon-settings-dark",attrs:{id:"app-list-empty-icon"}}),t._v(" "),e("h2",[t._v(t._s(t.t("settings","No apps found for your version")))])])])},[],!1,null,"5548e438",null).exports;var q=a(9165),H=a(85168),Y=a(63814),Q=a(19051),K=a(6695),J=a(36620);function X(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,a)}return n}function Z(t,e,n){return(e=function(t){var e=function(t){if("object"!=typeof t||!t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var n=e.call(t,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:e+""}(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}const tt=t=>{var e;const n=function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?X(Object(n),!0).forEach(function(e){Z(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}({},t);if(n.date&&(n.date=Date.parse(n.date)),n.expiryDate&&(n.expiryDate=Date.parse(n.expiryDate)),"post"===n.type)return n;if("showcase"===n.type)return n;if("carousel"===n.type)return n;throw new Error("Invalid argument, app discover element with type ".concat(null!==(e=t.type)&&void 0!==e?e:"unknown"," is unknown"))},et=t=>{const e=Date.now();return!(t.date&&t.date>e||t.expiryDate&&t.expiryDate<e)},nt=(0,i.pM)({__name:"AppStoreDiscoverSection",setup(t){const e=(0,i.$V)(()=>a.e(1023).then(a.bind(a,51023))),n=(0,i.$V)(()=>Promise.all([a.e(1023),a.e(459)]).then(a.bind(a,50459))),s=(0,i.$V)(()=>Promise.all([a.e(1023),a.e(8737)]).then(a.bind(a,98737))),p=(0,i.KR)(!1),r=(0,i.KR)([]),l=t=>{for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t};return(0,i.KC)(async()=>{try{const{data:t}=await Q.Ay.get((0,Y.Jv)("/settings/api/apps/discover"));if(0===t.length)return J.A.info("No app discover elements available (empty response)"),void(p.value=!0);const e=t.map(tt).filter(et),n=l(e);n.sort((t,e)=>{var n,a;return(null!==(n=t.order)&&void 0!==n?n:1/0)<(null!==(a=e.order)&&void 0!==a?a:1/0)?-1:1}),r.value=n}catch(t){p.value=!0,J.A.error(t),(0,H.Qg)((0,o.Tl)("settings","Could not load app discover section"))}}),{__sfc:!0,PostType:e,CarouselType:n,ShowcaseType:s,hasError:p,elements:r,shuffleArray:l,getComponent:t=>"post"===t?e:"carousel"===t?n:"showcase"===t?s:(0,i.pM)({mounted:()=>J.A.error("Unknown component requested ",t),render:t=>t("div",(0,o.Tl)("settings","Could not render element"))}),mdiEyeOffOutline:q.tQ_,t:o.Tl,NcEmptyContent:d.A,NcIconSvgWrapper:K.A,NcLoadingIcon:c.A}}});var at=a(5472),it={};it.styleTagTransform=G(),it.setAttributes=L(),it.insert=M().bind(null,"head"),it.domAPI=B(),it.insertStyleElement=W(),E()(at.A,it),at.A&&at.A.locals&&at.A.locals;const ot=(0,j.A)(nt,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticClass:"app-discover"},[n.hasError?e(n.NcEmptyContent,{attrs:{name:n.t("settings","Nothing to show"),description:n.t("settings","Could not load section content from app store.")},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcIconSvgWrapper,{attrs:{path:n.mdiEyeOffOutline,size:64}})]},proxy:!0}],null,!1,3626885458)}):0===n.elements.length?e(n.NcEmptyContent,{attrs:{name:n.t("settings","Loading"),description:n.t("settings","Fetching the latest newsâ€¦")},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcLoadingIcon,{attrs:{size:64}})]},proxy:!0}])}):t._l(n.elements,function(a,i){var o;return e(n.getComponent(a.type),t._b({key:null!==(o=a.id)&&void 0!==o?o:i,tag:"component"},"component",a,!1))})],2)},[],!1,null,"114ea95a",null).exports,st=(0,i.pM)({__name:"AppStore",setup(t){const e=(0,s.lq)(),n=(0,p.T)(),a=(0,D.a)(),u=(0,i.EW)(()=>{var t,n;return null!==(t=null===(n=e.params)||void 0===n?void 0:n.category)&&void 0!==t?t:"discover"}),A=(0,i.EW)(()=>{var t,e;return null!==(t=r.l[u.value])&&void 0!==t?t:null===(e=n.getCategoryById(u.value))||void 0===e?void 0:e.displayName}),g=(0,o.Tl)("settings","App Store"),m=(0,i.EW)(()=>"".concat(A.value," - ").concat(g)),v=(0,i.nI)(),h=(0,i.EW)(()=>(null==v?void 0:v.proxy).$store.getters.loading("list"));return(0,i.KC)(()=>{(null==v?void 0:v.proxy).$store.dispatch("getCategories",{shouldRefetchCategories:!0}),(null==v?void 0:v.proxy).$store.dispatch("getAllApps"),(null==v?void 0:v.proxy).$store.getters.isAppApiEnabled&&(a.fetchAllApps(),a.updateAppsStatus())}),(0,i.xo)(()=>{clearInterval(a.getStatusUpdater)}),{__sfc:!0,route:e,store:n,appApiStore:a,currentCategory:u,viewLabel:A,pageHeading:g,pageTitle:m,instance:v,isLoading:h,t:o.Tl,NcAppContent:l.A,NcEmptyContent:d.A,NcLoadingIcon:c.A,AppList:V,AppStoreDiscoverSection:ot}}});var pt=a(56644),rt={};rt.styleTagTransform=G(),rt.setAttributes=L(),rt.insert=M().bind(null,"head"),rt.domAPI=B(),rt.insertStyleElement=W(),E()(pt.A,rt),pt.A&&pt.A.locals&&pt.A.locals;const lt=(0,j.A)(st,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcAppContent,{staticClass:"app-settings-content",attrs:{"page-heading":n.pageHeading,"page-title":n.pageTitle}},[e("h2",{staticClass:"app-settings-content__label",domProps:{textContent:t._s(n.viewLabel)}}),t._v(" "),"discover"===n.currentCategory?e(n.AppStoreDiscoverSection):n.isLoading?e(n.NcEmptyContent,{staticClass:"empty-content__loading",attrs:{name:n.t("settings","Loading app list")},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.NcLoadingIcon,{attrs:{size:64}})]},proxy:!0}])}):e(n.AppList,{attrs:{category:n.currentCategory}})],1)},[],!1,null,"cd4ac3b0",null).exports},98656:(t,e,n)=>{n.d(e,{A:()=>p});var a=n(71354),i=n.n(a),o=n(76314),s=n.n(o)()(i());s.push([t.id,".daemon[data-v-e726cadc]{padding:20px}.daemon h4[data-v-e726cadc]{font-weight:bold;margin:10px auto}","",{version:3,sources:["webpack://./apps/settings/src/components/AppStoreSidebar/AppDeployDaemonTab.vue"],names:[],mappings:"AACA,yBACE,YAAA,CAEA,4BACE,gBAAA,CACA,gBAAA",sourcesContent:["\n.daemon {\n  padding: 20px;\n\n  h4 {\n    font-weight: bold;\n    margin: 10px auto;\n  }\n}\n"],sourceRoot:""}]);const p=s},99002:(t,e,n)=>{n.d(e,{A:()=>P});var a=n(94219),i=n(85471),o=n(63814),s=n(32190),p=n(21376);const r={name:"FormatListBulletedIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var l=n(14486);const d=(0,l.A)(r,function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon format-list-bulleted-icon",attrs:{"aria-hidden":t.title?null:"true","aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M7,5H21V7H7V5M7,13V11H21V13H7M4,4.5A1.5,1.5 0 0,1 5.5,6A1.5,1.5 0 0,1 4,7.5A1.5,1.5 0 0,1 2.5,6A1.5,1.5 0 0,1 4,4.5M4,10.5A1.5,1.5 0 0,1 5.5,12A1.5,1.5 0 0,1 4,13.5A1.5,1.5 0 0,1 2.5,12A1.5,1.5 0 0,1 4,10.5M7,19V17H21V19H7M4,16.5A1.5,1.5 0 0,1 5.5,18A1.5,1.5 0 0,1 4,19.5A1.5,1.5 0 0,1 2.5,18A1.5,1.5 0 0,1 4,16.5Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])},[],!1,null,null,null).exports;var c=n(1522),u=n(23453),A=n(846),g=n(62938);const m={name:"DaemonSelectionEntry",components:{NcListItem:c.A},mixins:[u.A],props:{daemon:{type:Object,required:!0},isDefault:{type:Boolean,required:!0},app:{type:Object,required:!0},deployOptions:{type:Object,required:!1,default:()=>({})}},setup:()=>({store:(0,A.T)(),appApiStore:(0,g.a)()}),computed:{itemTitle(){return this.daemon.name+" - "+this.daemon.display_name},daemons(){return this.appApiStore.dockerDaemons}},methods:{closeModal(){this.$emit("close")},selectDaemonAndInstall(){this.closeModal(),this.enable(this.app.id,this.daemon,this.deployOptions)}}},v=(0,l.A)(m,function(){var t=this;return(0,t._self._c)("NcListItem",{attrs:{name:t.itemTitle,details:t.isDefault?t.t("settings","Default"):"","force-display-actions":!0,"counter-number":t.daemon.exAppsCount,active:t.isDefault,"counter-type":"highlighted"},on:{click:function(e){return e.stopPropagation(),t.selectDaemonAndInstall.apply(null,arguments)}},scopedSlots:t._u([{key:"subname",fn:function(){return[t._v("\n\t\t"+t._s(t.daemon.accepts_deploy_id)+"\n\t")]},proxy:!0}])})},[],!1,null,null,null).exports,h={__name:"DaemonSelectionList",props:{app:{type:Object,required:!0},deployOptions:{type:Object,required:!1,default:()=>({})}},emits:["close"],setup(t,e){let{emit:n}=e;const a=(0,g.a)(),r=(0,i.EW)(()=>a.dockerDaemons),l=(0,i.EW)(()=>a.defaultDaemon),c=(0,i.EW)(()=>(0,o.Jv)("/settings/admin/app_api"));return{__sfc:!0,appApiStore:a,dockerDaemons:r,defaultDaemon:l,appApiAdminPage:c,emit:n,closeModal:()=>{n("close")},NcEmptyContent:s.A,NcButton:p.A,FormatListBullet:d,DaemonSelectionEntry:v}}};var b=n(85072),C=n.n(b),f=n(97825),y=n.n(f),_=n(77659),x=n.n(_),w=n(55056),S=n.n(w),k=n(10540),N=n.n(k),D=n(41113),I=n.n(D),T=n(40771),E={};E.styleTagTransform=I(),E.setAttributes=S(),E.insert=x().bind(null,"head"),E.domAPI=y(),E.insertStyleElement=N(),C()(T.A,E),T.A&&T.A.locals&&T.A.locals;const O=(0,l.A)(h,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e("div",{staticClass:"daemon-selection-list"},[n.dockerDaemons.length>0?e("ul",{attrs:{"aria-label":t.t("settings","Registered Deploy daemons list")}},t._l(n.dockerDaemons,function(a){return e(n.DaemonSelectionEntry,{key:a.id,attrs:{daemon:a,"is-default":n.defaultDaemon.name===a.name,app:t.app,"deploy-options":t.deployOptions},on:{close:n.closeModal}})}),1):e(n.NcEmptyContent,{staticClass:"daemon-selection-list__empty-content",attrs:{name:t.t("settings","No Deploy daemons configured"),description:t.t("settings","Register a custom one or setup from available templates")},scopedSlots:t._u([{key:"icon",fn:function(){return[e(n.FormatListBullet,{attrs:{size:20}})]},proxy:!0},{key:"action",fn:function(){return[e(n.NcButton,{attrs:{href:n.appApiAdminPage}},[t._v("\n\t\t\t\t"+t._s(t.t("settings","Manage Deploy daemons"))+"\n\t\t\t")])]},proxy:!0}])})],1)},[],!1,null,"07c487de",null).exports,B={__name:"DaemonSelectionDialog",props:{show:{type:Boolean,required:!0},app:{type:Object,required:!0},deployOptions:{type:Object,required:!1,default:()=>({})}},emits:["update:show"],setup(t,e){let{emit:n}=e;return{__sfc:!0,emit:n,closeModal:()=>{n("update:show",!1)},NcDialog:a.A,DaemonSelectionList:O}}},P=(0,l.A)(B,function(){var t=this,e=t._self._c,n=t._self._setupProxy;return e(n.NcDialog,{attrs:{open:t.show,name:t.t("settings","Choose Deploy Daemon for {appName}",{appName:t.app.name}),size:"normal"},on:{"update:open":n.closeModal}},[e(n.DaemonSelectionList,{attrs:{app:t.app,"deploy-options":t.deployOptions},on:{close:n.closeModal}})],1)},[],!1,null,null,null).exports},99148:(t,e,n)=>{n.d(e,{A:()=>y});var a=n(6695),i=n(9165),o=n(53334);const s=(0,n(85471).pM)({name:"AppScore",components:{NcIconSvgWrapper:a.A},props:{score:{type:Number,required:!0}},setup:()=>({mdiStar:i.ZL5,mdiStarHalfFull:i.tdF,mdiStarOutline:i.dF}),computed:{title(){const t=(5*this.score).toFixed(1);return(0,o.Tl)("settings","Community rating: {score}/5",{score:t})},fullStars(){return Math.floor(5*this.score+.25)},emptyStars(){return Math.min(Math.floor(5*(1-this.score)+.25),5-this.fullStars)},hasHalfStar(){return this.fullStars+this.emptyStars<5}}});var p=n(85072),r=n.n(p),l=n(97825),d=n.n(l),c=n(77659),u=n.n(c),A=n(55056),g=n.n(A),m=n(10540),v=n.n(m),h=n(41113),b=n.n(h),C=n(90532),f={};f.styleTagTransform=b(),f.setAttributes=g(),f.insert=u().bind(null,"head"),f.domAPI=d(),f.insertStyleElement=v(),r()(C.A,f),C.A&&C.A.locals&&C.A.locals;const y=(0,n(14486).A)(s,function(){var t=this,e=t._self._c;return t._self._setupProxy,e("span",{staticClass:"app-score__wrapper",attrs:{role:"img","aria-label":t.title,title:t.title}},[t._l(t.fullStars,function(n){return e("NcIconSvgWrapper",{key:"full-star-".concat(n),attrs:{path:t.mdiStar,inline:""}})}),t._v(" "),t.hasHalfStar?e("NcIconSvgWrapper",{attrs:{path:t.mdiStarHalfFull,inline:""}}):t._e(),t._v(" "),t._l(t.emptyStars,function(n){return e("NcIconSvgWrapper",{key:"empty-star-".concat(n),attrs:{path:t.mdiStarOutline,inline:""}})})],2)},[],!1,null,"d9bfc6c8",null).exports}}]);
//# sourceMappingURL=settings-apps-view-4529.js.map?v=69b51c1a80236c70a31e