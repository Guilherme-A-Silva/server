(()=>{var e,t={42634:()=>{},59169:()=>{},63779:()=>{},73911:(e,t,n)=>{"use strict";n.d(t,{A:()=>l});var r=n(71354),s=n.n(r),i=n(76314),o=n.n(i)()(s());o.push([e.id,".files-list__system-tags{--min-size: 32px;display:none;justify-content:center;align-items:center;min-width:calc(var(--min-size)*2);max-width:300px}.files-list__system-tag{padding:5px 10px;border:1px solid;border-radius:var(--border-radius-pill);border-color:var(--color-border);color:var(--color-text-maxcontrast);height:var(--min-size);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;line-height:22px;text-align:center}.files-list__system-tag--more{overflow:visible;text-overflow:initial}.files-list__system-tag+.files-list__system-tag{margin-left:5px}@media(min-width: 512px){.files-list__system-tags{display:flex}}","",{version:3,sources:["webpack://./apps/systemtags/src/css/fileEntryInlineSystemTags.scss"],names:[],mappings:"AAKA,yBACC,gBAAA,CACA,YAAA,CACA,sBAAA,CACA,kBAAA,CACA,iCAAA,CACA,eAAA,CAGD,wBACC,gBAAA,CACA,gBAAA,CACA,uCAAA,CACA,gCAAA,CACA,mCAAA,CACA,sBAAA,CACA,kBAAA,CACA,eAAA,CACA,sBAAA,CACA,gBAAA,CACA,iBAAA,CAEA,8BACC,gBAAA,CACA,qBAAA,CAID,gDACC,eAAA,CAIF,yBACC,yBACC,YAAA,CAAA",sourcesContent:["/**\n * SPDX-FileCopyrightText: 2023 Nextcloud GmbH and Nextcloud contributors\n * SPDX-License-Identifier: AGPL-3.0-or-later\n */\n\n.files-list__system-tags {\n\t--min-size: 32px;\n\tdisplay: none;\n\tjustify-content: center;\n\talign-items: center;\n\tmin-width: calc(var(--min-size) * 2);\n\tmax-width: 300px;\n}\n\n.files-list__system-tag {\n\tpadding: 5px 10px;\n\tborder: 1px solid;\n\tborder-radius: var(--border-radius-pill);\n\tborder-color: var(--color-border);\n\tcolor: var(--color-text-maxcontrast);\n\theight: var(--min-size);\n\twhite-space: nowrap;\n\toverflow: hidden;\n\ttext-overflow: ellipsis;\n\tline-height: 22px; // min-size - 2 * 5px padding\n\ttext-align: center;\n\n\t&--more {\n\t\toverflow: visible;\n\t\ttext-overflow: initial;\n\t}\n\n\t// Proper spacing if multiple shown\n\t& + .files-list__system-tag {\n\t\tmargin-left: 5px;\n\t}\n}\n\n@media (min-width: 512px) {\n\t.files-list__system-tags {\n\t\tdisplay: flex;\n\t}\n}\n"],sourceRoot:""}]);const l=o},77199:()=>{},81631:(e,t,n)=>{"use strict";var r=n(35810),s=n(53334);const i=/[\p{Lu}]/u,o=/[\p{Ll}]/u,l=/^[\p{Lu}](?![\p{Lu}])/gu,a=/([\p{Alpha}\p{N}_]|$)/u,c=/[_.\- ]+/,d=new RegExp("^"+c.source),p=new RegExp(c.source+a.source,"gu"),u=new RegExp("\\d+"+a.source,"gu");function A(e,t){if("string"!=typeof e&&!Array.isArray(e))throw new TypeError("Expected the input to be `string | string[]`");if(t={pascalCase:!1,preserveConsecutiveUppercase:!1,...t},0===(e=Array.isArray(e)?e.map((e=>e.trim())).filter((e=>e.length)).join("-"):e.trim()).length)return"";const n=!1===t.locale?e=>e.toLowerCase():e=>e.toLocaleLowerCase(t.locale),r=!1===t.locale?e=>e.toUpperCase():e=>e.toLocaleUpperCase(t.locale);return 1===e.length?c.test(e)?"":t.pascalCase?r(e):n(e):(e!==n(e)&&(e=((e,t,n,r)=>{let s=!1,l=!1,a=!1,c=!1;for(let d=0;d<e.length;d++){const p=e[d];c=!(d>2)||"-"===e[d-3],s&&i.test(p)?(e=e.slice(0,d)+"-"+e.slice(d),s=!1,a=l,l=!0,d++):l&&a&&o.test(p)&&(!c||r)?(e=e.slice(0,d-1)+"-"+e.slice(d-1),a=l,l=!1,s=!0):(s=t(p)===p&&n(p)!==p,a=l,l=n(p)===p&&t(p)!==p)}return e})(e,n,r,t.preserveConsecutiveUppercase)),e=e.replace(d,""),e=t.preserveConsecutiveUppercase?((e,t)=>(l.lastIndex=0,e.replaceAll(l,(e=>t(e)))))(e,n):n(e),t.pascalCase&&(e=r(e.charAt(0))+e.slice(1)),((e,t)=>(p.lastIndex=0,u.lastIndex=0,e.replaceAll(u,((n,r,s)=>["_","-"].includes(e.charAt(s+n.length))?n:t(n))).replaceAll(p,((e,n)=>t(n)))))(e,r))}const g=function(e){var t;const n=null===(t=e.attributes)||void 0===t||null===(t=t["system-tags"])||void 0===t?void 0:t["system-tag"];return void 0===n?[]:[n].flat().map((e=>"string"==typeof e?e:e.text))};var f=n(85072),m=n.n(f),y=n(97825),v=n.n(y),h=n(77659),C=n.n(h),b=n(55056),w=n.n(b),x=n(10540),O=n.n(x),_=n(41113),j=n.n(_),P=n(73911),L={};L.styleTagTransform=j(),L.setAttributes=w(),L.insert=C().bind(null,"head"),L.domAPI=v(),L.insertStyleElement=O(),m()(P.A,L),P.A&&P.A.locals&&P.A.locals;const T=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.createElement("li");return n.classList.add("files-list__system-tag"),n.textContent=e,t&&n.classList.add("files-list__system-tag--more"),n},E=new r.hY({id:"system-tags",displayName:()=>"",iconSvgInline:()=>"",enabled(e){if(1!==e.length)return!1;const t=e[0];return 0!==g(t).length},exec:async()=>null,async renderInline(e){const t=g(e);if(0===t.length)return null;const n=document.createElement("ul");if(n.classList.add("files-list__system-tags"),n.setAttribute("aria-label",(0,s.Tl)("files","Assigned collaborative tags")),n.append(T(t[0])),2===t.length)n.append(T(t[1]));else if(t.length>1){const e=T("+"+(t.length-1),!0);e.setAttribute("title",t.slice(1).join(", ")),e.setAttribute("aria-hidden","true"),e.setAttribute("role","presentation"),n.append(e);for(const e of t.slice(1)){const t=T(e);t.classList.add("hidden-visually"),n.append(t)}}return n},order:0}),S=new r.hY({id:"systemtags:open-in-files",displayName:()=>(0,s.Tl)("systemtags","Open in Files"),iconSvgInline:()=>"",enabled:(e,t)=>"tags"===t.id&&1===e.length&&!0!==e[0].attributes["is-tag"]&&e[0].type===r.pt.Folder,async exec(e){let t=e.dirname;return e.type===r.pt.Folder&&(t=e.path),window.OCP.Files.Router.goToRoute(null,{view:"files",fileid:String(e.fileid)},{dir:t,openfile:"true"}),null},order:-1e3,default:r.m9.HIDDEN});var B=n(21777),D=(n(19051),n(60669));const I=(0,n(63814).dC)("dav"),R=(0,D.UU)(I),N=e=>{R.setHeaders({"X-Requested-With":"XMLHttpRequest",requesttoken:null!=e?e:""})};(0,B.zo)(N),N((0,B.do)());const k=(0,n(35947).YK)().setApp("systemtags").detectUser().build();function F(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function U(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?F(Object(n),!0).forEach((function(t){z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function z(e,t,n){return(t=function(e){var t=function(e){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const H="/systemtags",Y=(0,r.H4)(),M=e=>(0,r.Al)(e),X=e=>'<?xml version="1.0"?>\n<oc:filter-files '.concat((0,r.CP)(),">\n\t<d:prop>\n\t\t").concat((0,r.VX)(),"\n\t</d:prop>\n\t<oc:filter-rules>\n\t\t<oc:systemtag>").concat(e,"</oc:systemtag>\n\t</oc:filter-rules>\n</oc:filter-files>"),G=function(e){var t,n;return new r.vd({id:e.id,source:"".concat(r.PY).concat(H,"/").concat(e.id),owner:String(null!==(t=null===(n=(0,B.HW)())||void 0===n?void 0:n.uid)&&void 0!==t?t:"anonymous"),root:H,displayname:e.displayName,permissions:r.aX.READ,attributes:U(U({},e),{},{"is-tag":!0})})};(0,r.Yc)("nc:system-tags"),(0,r.Gg)(E),(0,r.Gg)(S),(0,r.bh)().register(new r.Ss({id:"tags",name:(0,s.Tl)("systemtags","Tags"),caption:(0,s.Tl)("systemtags","List of tags and their associated files and folders."),emptyTitle:(0,s.Tl)("systemtags","No tags found"),emptyCaption:(0,s.Tl)("systemtags","Tags you have created will show up here."),icon:'<svg xmlns="http://www.w3.org/2000/svg" id="mdi-tag-multiple" viewBox="0 0 24 24"><path d="M5.5,9A1.5,1.5 0 0,0 7,7.5A1.5,1.5 0 0,0 5.5,6A1.5,1.5 0 0,0 4,7.5A1.5,1.5 0 0,0 5.5,9M17.41,11.58C17.77,11.94 18,12.44 18,13C18,13.55 17.78,14.05 17.41,14.41L12.41,19.41C12.05,19.77 11.55,20 11,20C10.45,20 9.95,19.78 9.58,19.41L2.59,12.42C2.22,12.05 2,11.55 2,11V6C2,4.89 2.89,4 4,4H9C9.55,4 10.05,4.22 10.41,4.58L17.41,11.58M13.54,5.71L14.54,4.71L21.41,11.58C21.78,11.94 22,12.45 22,13C22,13.55 21.78,14.05 21.42,14.41L16.04,19.79L15.04,18.79L20.75,13L13.54,5.71Z" /></svg>',order:25,getContents:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/";const t=(await(async()=>{try{const{data:e}=await R.getDirectoryContents("/systemtags",{data:'<?xml version="1.0"?>\n<d:propfind  xmlns:d="DAV:" xmlns:oc="http://owncloud.org/ns">\n\t<d:prop>\n\t\t<oc:id />\n\t\t<oc:display-name />\n\t\t<oc:user-visible />\n\t\t<oc:user-assignable />\n\t\t<oc:can-assign />\n\t</d:prop>\n</d:propfind>',details:!0,glob:"/systemtags/*"});return(e=>e.map((e=>{let{props:t}=e;return Object.fromEntries(Object.entries(t).map((e=>{let[t,n]=e;return[A(t),"displayName"===A(t)?String(n):n]})))})))(e)}catch(e){throw k.error((0,s.Tl)("systemtags","Failed to load tags"),{error:e}),new Error((0,s.Tl)("systemtags","Failed to load tags"))}})()).filter((e=>e.userVisible));var n;if("/"===e)return{folder:new r.vd({id:0,source:"".concat(r.PY).concat(H),owner:null===(n=(0,B.HW)())||void 0===n?void 0:n.uid,root:H,permissions:r.aX.NONE}),contents:t.map(G)};const i=parseInt(e.split("/",2)[1]),o=t.find((e=>e.id===i));if(!o)throw new Error("Tag not found");return{folder:G(o),contents:(await Y.getDirectoryContents(r.lJ,{details:!0,data:X(i),headers:{method:"REPORT"}})).data.map(M)}}}))},86833:()=>{}},n={};function r(e){var s=n[e];if(void 0!==s)return s.exports;var i=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.m=t,e=[],r.O=(t,n,s,i)=>{if(!n){var o=1/0;for(d=0;d<e.length;d++){for(var[n,s,i]=e[d],l=!0,a=0;a<n.length;a++)(!1&i||o>=i)&&Object.keys(r.O).every((e=>r.O[e](n[a])))?n.splice(a--,1):(l=!1,i<o&&(o=i));if(l){e.splice(d--,1);var c=s();void 0!==c&&(t=c)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,s,i]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.e=()=>Promise.resolve(),r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),r.j=2766,(()=>{r.b="undefined"!=typeof document&&document.baseURI||self.location.href;var e={2766:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var s,i,[o,l,a]=n,c=0;if(o.some((t=>0!==e[t]))){for(s in l)r.o(l,s)&&(r.m[s]=l[s]);if(a)var d=a(r)}for(t&&t(n);c<o.length;c++)i=o[c],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(d)},n=self.webpackChunknextcloud=self.webpackChunknextcloud||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.nc=void 0;var s=r.O(void 0,[4208],(()=>r(81631)));s=r.O(s)})();
//# sourceMappingURL=systemtags-init.js.map?v=95c10c38d51758dab741